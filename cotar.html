<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cota√ß√£o de Reserva - ICARA√ç PRAIA HOTEL</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            max-width: 650px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f9ff;
            color: #333;
            line-height: 1.6;
        }
        .container {
            background-color: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        h1 {
            color: #0056b3;
            text-align: center;
            margin-bottom: 5px;
            font-size: 24px;
        }
        h2 {
            color: #0077cc;
            text-align: center;
            margin-top: 0;
            margin-bottom: 25px;
            font-size: 20px;
            font-weight: 600;
        }
        .form-group {
            margin-bottom: 18px;
        }
        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: #444;
        }
        input, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ced4da;
            border-radius: 6px;
            box-sizing: border-box;
            font-size: 15px;
            transition: border-color 0.3s;
        }
        input:focus, select:focus {
            border-color: #80bdff;
            outline: 0;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }
        button {
            color: white;
            border: none;
            padding: 12px 15px;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .result {
            margin-top: 25px;
            padding: 20px;
            background-color: #f0f8ff;
            border-radius: 8px;
            white-space: pre-wrap;
            font-family: 'Consolas', monospace;
            border: 1px solid #d1e7ff;
            max-height: 400px;
            overflow-y: auto;
        }
        .primary-btn {
            background-color: #0066cc;
        }
        .primary-btn:hover {
            background-color: #0052a3;
        }
        .copy-btn {
            background-color: #28a745;
        }
        .copy-btn:hover {
            background-color: #218838;
        }
        .whatsapp-btn {
            background-color: #25D366;
        }
        .whatsapp-btn:hover {
            background-color: #1da851;
        }
        .toggle-container {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 26px;
            margin-right: 10px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #0066cc;
        }
        input:checked + .slider:before {
            transform: translateX(24px);
        }
        .disclaimer {
            font-size: 13px;
            color: #666;
            margin-top: 25px;
            text-align: center;
            padding: 10px;
            background-color: #fff8e6;
            border-radius: 6px;
            border-left: 4px solid #ffc107;
        }
        .total-box {
            background-color: #e7f5ff;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-weight: 600;
            border-left: 4px solid #0066cc;
        }
        .total-box div {
            margin-bottom: 8px;
        }
        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 15px;
        }
        .button-group button {
            flex: 1;
        }
        .required-field::after {
            content: " *";
            color: #dc3545;
        }
        .date-inputs {
            display: flex;
            gap: 15px;
        }
        .date-inputs .form-group {
            flex: 1;
        }
        @media (max-width: 600px) {
            .date-inputs {
                flex-direction: column;
                gap: 0;
            }
            .button-group {
                flex-direction: column;
                gap: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Cota√ß√£o de Reserva</h1>
        <h2>ICARA√ç PRAIA HOTEL</h2>
        
        <div class="date-inputs">
            <div class="form-group">
                <label for="checkin" class="required-field">Data de Check-in:</label>
                <input type="date" id="checkin" required>
            </div>
            
            <div class="form-group">
                <label for="checkout" class="required-field">Data de Check-out:</label>
                <input type="date" id="checkout" required>
            </div>
        </div>
        
        <div class="form-group">
            <label for="pensionType">Tipo de Pens√£o:</label>
            <select id="pensionType">
                <option value="Com caf√©" selected>Com caf√© da manh√£</option>
                <option value="Sem caf√©">Sem caf√© da manh√£</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="adults">N√∫mero de Adultos:</label>
            <input type="number" id="adults" min="1" value="2" required>
        </div>
        
        <div class="form-group">
            <label for="children">N√∫mero de Crian√ßas (at√© 5 anos):</label>
            <input type="number" id="children" min="0" value="0">
        </div>
        
        <div class="form-group">
            <label for="dailyRate" class="required-field">Valor da Di√°ria (R$):</label>
            <input type="number" id="dailyRate" min="0" step="0.01" value="500.00" required>
        </div>
        
        <div class="toggle-container">
            <label class="toggle-switch">
                <input type="checkbox" id="parkingCheck">
                <span class="slider"></span>
            </label>
            <label for="parkingCheck">Solicitar Estacionamento? (R$ 45/dia)</label>
        </div>
        
        <div class="form-group" id="parkingDaysGroup" style="display: none;">
            <label for="parkingDays">Dias de estacionamento:</label>
            <input type="number" id="parkingDays" min="1" value="1" readonly>
        </div>
        
        <div class="form-group">
            <label for="paymentDueDate" class="required-field">Prazo para Pagamento:</label>
            <input type="date" id="paymentDueDate" required>
        </div>
        
        <div class="form-group">
            <label for="creditCardLink">Link para pagamento com cart√£o (opcional):</label>
            <input type="url" id="creditCardLink" placeholder="https://pagamento.com/link-123">
        </div>
        
        <div class="form-group">
            <label for="senderName" class="required-field">Emissor da cota√ß√£o:</label>
            <input type="text" id="senderName" required placeholder="Digite seu nome">
        </div>
        
        <div id="totalDisplay" class="total-box" style="display: none;">
            <div>Total de Di√°rias: <span id="totalDays">0</span> dias</div>
            <div>Valor Hospedagem: R$ <span id="accommodationTotal">0,00</span></div>
            <div id="parkingTotalLine" style="display: none;">Valor Estacionamento: R$ <span id="parkingTotal">0,00</span></div>
            <div>Total Geral: R$ <span id="grandTotal">0,00</span></div>
        </div>
        
        <button class="primary-btn" onclick="generateQuotation()">Gerar Cota√ß√£o</button>
        
        <div class="disclaimer">
            Esta √© apenas uma cota√ß√£o e n√£o garante a disponibilidade at√© a confirma√ß√£o do pagamento.
            Valores sujeitos a altera√ß√£o sem aviso pr√©vio.
        </div>
        
        <div class="result" id="result" style="display: none;">
            <!-- Result will appear here -->
        </div>
        
        <div class="button-group" id="actionButtons" style="display: none;">
            <button class="copy-btn" onclick="copyToClipboard()">Copiar Texto</button>
            <button class="whatsapp-btn" onclick="sendToWhatsApp()">Enviar por WhatsApp</button>
        </div>
    </div>

    <script>
        // Set default dates
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            // Format dates as YYYY-MM-DD
            const formatDate = (date) => date.toISOString().split('T')[0];
            
            document.getElementById('checkin').value = formatDate(today);
            document.getElementById('checkout').value = formatDate(tomorrow);
            
            // Set payment due date to today + 2 days
            const paymentDue = new Date(today);
            paymentDue.setDate(paymentDue.getDate() + 2);
            document.getElementById('paymentDueDate').value = formatDate(paymentDue);
            
            // Trigger initial calculation
            updateCalculations();
        });

        // Calculate days and update parking days when dates change
        document.getElementById('checkin').addEventListener('change', updateCalculations);
        document.getElementById('checkout').addEventListener('change', updateCalculations);
        document.getElementById('parkingCheck').addEventListener('change', function() {
            const parkingDaysGroup = document.getElementById('parkingDaysGroup');
            parkingDaysGroup.style.display = this.checked ? 'block' : 'none';
            document.getElementById('parkingTotalLine').style.display = this.checked ? 'block' : 'none';
            updateCalculations();
        });
        document.getElementById('dailyRate').addEventListener('input', updateCalculations);
        
        function updateCalculations() {
            const checkin = document.getElementById('checkin').value;
            const checkout = document.getElementById('checkout').value;
            
            if (checkin && checkout) {
                const checkinDate = new Date(checkin);
                const checkoutDate = new Date(checkout);
                
                // Ensure checkout is after checkin
                if (checkoutDate <= checkinDate) {
                    document.getElementById('checkout').value = '';
                    alert("A data de check-out deve ser posterior √† data de check-in");
                    return;
                }
                
                const timeDiff = checkoutDate - checkinDate;
                const daysDiff = Math.max(1, timeDiff / (1000 * 60 * 60 * 24));
                
                // Update parking days to match stay duration
                if (document.getElementById('parkingCheck').checked) {
                    document.getElementById('parkingDays').value = daysDiff;
                }
                
                // Calculate and display totals
                const dailyRate = parseFloat(document.getElementById('dailyRate').value) || 0;
                const issRate = 0.02;
                const totalPerDay = dailyRate * (1 + issRate);
                const accommodationTotal = totalPerDay * daysDiff;
                const parkingRate = 45;
                const parkingTotal = document.getElementById('parkingCheck').checked ? daysDiff * parkingRate : 0;
                const grandTotal = accommodationTotal + parkingTotal;
                
                document.getElementById('totalDays').textContent = daysDiff;
                document.getElementById('accommodationTotal').textContent = accommodationTotal.toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2});
                document.getElementById('parkingTotal').textContent = parkingTotal.toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2});
                document.getElementById('grandTotal').textContent = grandTotal.toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2});
                document.getElementById('totalDisplay').style.display = 'block';
            }
        }
        
        function generateQuotation() {
            // Get input values
            const senderName = document.getElementById('senderName').value;
            const checkin = document.getElementById('checkin').value;
            const checkout = document.getElementById('checkout').value;
            const adults = document.getElementById('adults').value;
            const children = document.getElementById('children').value;
            const dailyRate = parseFloat(document.getElementById('dailyRate').value);
            const paymentDueDate = document.getElementById('paymentDueDate').value;
            const parkingRequested = document.getElementById('parkingCheck').checked;
            const parkingDays = parkingRequested ? parseInt(document.getElementById('parkingDays').value) : 0;
            const creditCardLink = document.getElementById('creditCardLink').value;
            const pensionType = document.getElementById('pensionType').value;
            
            // Validate required fields
            if (!checkin || !checkout || !senderName || !paymentDueDate || isNaN(dailyRate)) {
                alert("Por favor, preencha todos os campos obrigat√≥rios corretamente");
                return;
            }
            
            // Calculate number of days
            const checkinDate = new Date(checkin);
            const checkoutDate = new Date(checkout);
            const timeDiff = checkoutDate - checkinDate;
            const daysDiff = Math.max(1, timeDiff / (1000 * 60 * 60 * 24));
            
            // Format payment due date
            const paymentDueDateObj = new Date(paymentDueDate);
            const formattedPaymentDue = paymentDueDateObj.toLocaleDateString('pt-BR');
            
            // Calculate totals
            const issRate = 0.02;
            const totalPerDay = dailyRate * (1 + issRate);
            const accommodationTotal = totalPerDay * daysDiff;
            const parkingRate = 45;
            const parkingTotal = parkingRequested ? parkingDays * parkingRate : 0;
            const grandTotal = accommodationTotal + parkingTotal;
            
            // Format dates and values
            const formattedCheckin = formatDate(checkin);
            const formattedCheckout = formatDate(checkout);
            const formattedDailyRate = dailyRate.toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2});
            const formattedTotalPerDay = totalPerDay.toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2});
            const formattedAccommodationTotal = accommodationTotal.toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2});
            const formattedParkingTotal = parkingTotal.toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2});
            const formattedGrandTotal = grandTotal.toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2});
            const issValue = (dailyRate * issRate).toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2});
            
            // Build the quotation message
            let message = `üè® *ICARA√ç PRAIA HOTEL* \n\n`;
            message += `üìã *COTA√á√ÉO DE RESERVA* (n√£o √© uma confirma√ß√£o) \n\n`;
            message += `üõèÔ∏è Tipo de Pens√£o: ${pensionType} \n`;
            message += `üë®‚Äçüë©‚Äçüëß‚Äçüë¶ H√≥spedes: ${adults} Adulto(s), ${children} Crian√ßa(s) (at√© 5 anos) \n`;
            message += `üóì Check-in: ${formattedCheckin} √†s 14hrs \n`;
            message += `üóì Check-out: ${formattedCheckout} √†s 12hrs \n`;
            message += `üìÖ N¬∫ Di√°rias: ${daysDiff} \n`;
            message += `üöó Estacionamento: ${parkingRequested ? `${parkingDays} dia(s) - R$ ${formattedParkingTotal}` : 'N√£o solicitado'} \n\n`;
            
            if (pensionType === "Com caf√©") {
                message += `‚Ä¢ ‚òï Caf√© da manh√£ incluso \n`;
            }
            message += `‚Ä¢ üçΩÔ∏è Restaurante pr√≥prio \n`;
            message += `‚Ä¢ üõú Internet (wi-fi) \n`;
            message += `‚Ä¢ üõèÔ∏è Apartamentos com Smart TV, ar condicionado, telefone, minibar e cofre individual \n`;
            message += `‚Ä¢ üê∂ *N√£o aceitamos animais* \n`;
            message += `‚Ä¢ üöó *Estacionamento R$ 45,00 por dia, mediante disponibilidade, solicita√ß√£o e confirma√ß√£o ‚Äì vagas limitadas* \n\n`;
            
            message += `*POL√çTICA PARA MENORES:* \n`;
            message += `üë®‚Äçüë©‚Äçüë¶ *Hospedagem de menores de 18 anos:* \n`;
            message += `- *Acompanhado dos pais:* apresentar no check-in documento de identidade ou certid√£o de nascimento comprovando ser filho de um dos pais presente. \n`;
            message += `- *Desacompanhado dos pais:* apresentar no check-in documento de identidade ou certid√£o de nascimento e autoriza√ß√£o de ambos os pais reconhecida em cart√≥rio, por determina√ß√£o legal. \n\n`;
            
            message += `*DETALHES FINANCEIROS:* \n`;
            message += `üí∞ Di√°ria: R$ ${formattedDailyRate} \n`;
            message += `üìä ISS (2%): R$ ${issValue} \n`;
            message += `üíµ Total por dia: R$ ${formattedTotalPerDay} \n`;
            message += `üè® Total Hospedagem (${daysDiff} di√°rias): R$ ${formattedAccommodationTotal} \n`;
            if (parkingRequested) {
                message += `üöó Estacionamento (${parkingDays} dia(s)): R$ ${formattedParkingTotal} \n`;
            }
            message += `üí≥ *TOTAL GERAL:* R$ ${formattedGrandTotal} \n\n`;
            
            message += `*CONDI√á√ïES DE PAGAMENTO:* \n`;
            message += `‚û°Ô∏è Pagamento antecipado at√© ${formattedPaymentDue} \n\n`;
            
            message += `üü¢ *OP√á√ïES DE PAGAMENTO:* \n`;
            message += `‚û°Ô∏è *PIX:* reservas@icaraipraiahotel.com.br \n`;
            message += `‚û°Ô∏è *Dep√≥sito:* Banco: Bradesco Ag√™ncia:0541 C/c: 0017561-7 \n`;
            if (creditCardLink) {
                message += `‚û°Ô∏è *Cart√£o de Cr√©dito:* ${creditCardLink} \n`;
            }
            message += `\n`;
            
            message += `üî¥ *IMPORTANTE:* \n`;
            message += `- Esta √© apenas uma cota√ß√£o, n√£o uma reserva confirmada \n`;
            message += `- A disponibilidade est√° sujeita a confirma√ß√£o ap√≥s pagamento \n`;
            message += `- Valores podem sofrer altera√ß√µes sem aviso pr√©vio \n`;
            message += `- Pol√≠tica de cancelamento: Reembolso de 100% apenas para cancelamentos com 48 horas de anteced√™ncia do check-in \n\n`;
            
            message += `Atenciosamente,\n${senderName}\nSetor de Reservas\nICARA√ç PRAIA HOTEL\nüìû (21) 1234-5678`;
            
            // Display the result
            const resultDiv = document.getElementById('result');
            resultDiv.textContent = message;
            resultDiv.style.display = 'block';
            
            // Show action buttons
            document.getElementById('actionButtons').style.display = 'flex';
            
            // Scroll to result
            resultDiv.scrollIntoView({ behavior: 'smooth' });
        }
        
        function formatDate(dateString) {
            const date = new Date(dateString);
            const day = date.getDate().toString().padStart(2, '0');
            const month = (date.getMonth() + 1).toString().padStart(2, '0');
            const year = date.getFullYear();
            return `${day}/${month}/${year}`;
        }
        
        function copyToClipboard() {
            const resultText = document.getElementById('result').textContent;
            navigator.clipboard.writeText(resultText).then(() => {
                alert('Cota√ß√£o copiada para a √°rea de transfer√™ncia!');
            }).catch(err => {
                console.error('Erro ao copiar: ', err);
                // Fallback for browsers that don't support clipboard API
                const textarea = document.createElement('textarea');
                textarea.value = resultText;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                alert('Cota√ß√£o copiada para a √°rea de transfer√™ncia!');
            });
        }
        
        function sendToWhatsApp() {
            const resultText = document.getElementById('result').textContent;
            const whatsappText = encodeURIComponent(resultText);
            const whatsappUrl = `https://wa.me/?text=${whatsappText}`;
            window.open(whatsappUrl, '_blank');
        }
    </script>
</body>
</html>
