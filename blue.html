<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel App - Completo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            margin: 0;
            padding: 0;
            color: #333;
            min-height: 100vh;
        }

        .app-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        /* Header */
        .app-header {
            background: white;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .app-header h1 {
            color: #2c3e50;
            margin: 0;
            font-size: 1.5em;
        }

        /* Tabs */
        .tabs {
            display: flex;
            background: white;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
            border-bottom: 3px solid transparent;
            font-size: 14px;
        }

        .tab.active {
            background: white;
            border-bottom: 3px solid #007bff;
            color: #007bff;
        }

        .tab-content {
            display: none;
            padding: 20px;
            min-height: calc(100vh - 120px);
        }

        .tab-content.active {
            display: block;
        }

        /* Estilos do Frigobar */
        .input-apartment {
            margin-bottom: 20px;
            text-align: center;
        }

        .input-apartment input {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            width: 100%;
            max-width: 300px;
            font-size: 16px;
        }

        #show-apartments {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
            display: block;
            margin: 20px auto;
            transition: background-color 0.3s;
        }

        #show-apartments:hover {
            background-color: #0056b3;
        }

        .apartment-list {
            display: none;
            margin-top: 20px;
        }

        .floor {
            margin-bottom: 20px;
        }

        .apartment {
            background: #007bff;
            color: white;
            padding: 10px;
            text-align: center;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
            margin: 5px;
            font-size: 14px;
            display: inline-block;
            width: calc(25% - 10px);
        }

        .apartment:hover {
            background: #0056b3;
        }

        .item-container {
            margin-bottom: 20px;
        }

        .item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 10px;
            background-color: #ecf0f1;
            transition: background-color 0.3s;
        }

        .item:hover {
            background-color: #dfe6e9;
        }

        .item button {
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 8px 12px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .item button.remove {
            background-color: #e74c3c;
        }

        .item button:hover {
            background-color: #2980b9;
        }

        .item button.remove:hover {
            background-color: #c0392b;
        }

        .quantity, .total {
            margin-left: 10px;
            font-weight: bold;
        }

        #summary {
            margin-top: 20px;
            font-size: 1.2em;
            text-align: center;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
        }

        button.send-whatsapp {
            background-color: #25D366;
            color: white;
            padding: 15px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: block;
            margin: 20px auto;
            transition: background-color 0.3s;
            font-size: 16px;
            font-weight: bold;
        }

        button.send-whatsapp:hover {
            background-color: #1da851;
        }

        /* Estilos da Lavanderia */
        .lavanderia-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .lavanderia-logo {
            width: 200px;
            margin: 0 auto 15px;
            display: block;
        }

        .lavanderia-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            text-align: center;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .lavanderia-button {
            width: 100%;
            padding: 12px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-bottom: 15px;
            transition: background 0.3s;
        }

        .lavanderia-button:hover {
            background: #0056b3;
        }

        .lavanderia-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-top: 10px;
        }

        .lavanderia-apartment {
            padding: 10px;
            background: #37F2AD;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .lavanderia-apartment:hover {
            background: #32d99c;
        }

        .lavanderia-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 5px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .lavanderia-table th {
            background: #f8f9fa;
            padding: 12px;
            text-align: left;
            font-weight: bold;
            border-bottom: 1px solid #ddd;
        }

        .lavanderia-table td {
            padding: 12px;
            border-bottom: 1px solid #eee;
        }

        .lavanderia-table tr:last-child td {
            border-bottom: none;
        }

        .service-badge {
            background: #e3f2fd;
            color: #1976d2;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin-left: 5px;
        }

        .service-button {
            padding: 8px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin: 2px;
            transition: background 0.3s;
        }

        .lavar-btn {
            background: #4caf50;
            color: white;
        }

        .lavar-btn:hover {
            background: #45a049;
        }

        .passar-btn {
            background: #2196f3;
            color: white;
        }

        .passar-btn:hover {
            background: #1e87db;
        }

        .resumo-section {
            background: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .resumo-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .undo-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .undo-btn:hover {
            background: #5a6268;
        }

        .servico-category {
            margin-bottom: 20px;
        }

        .category-header {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .item-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        .item-info {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .item-icon {
            width: 40px;
            height: 40px;
            object-fit: contain;
            border-radius: 5px;
            background: #f8f9fa;
            padding: 5px;
        }

        .item-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .qty-btn {
            background: none;
            border: none;
            color: #6c757d;
            cursor: pointer;
            font-size: 16px;
            transition: color 0.3s;
        }

        .qty-btn:hover {
            color: #007bff;
        }

        .item-total {
            font-weight: bold;
            color: #28a745;
            min-width: 80px;
            text-align: right;
        }

        .total-section {
            text-align: right;
            padding-top: 15px;
            border-top: 2px solid #eee;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .whatsapp-btn {
            background: #25d366;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 5px;
            cursor: pointer;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 16px;
            transition: background 0.3s;
        }

        .whatsapp-btn:hover {
            background: #1da851;
        }

        .print-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 5px;
            cursor: pointer;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 16px;
            transition: background 0.3s;
        }

        .print-btn:hover {
            background: #0056b3;
        }

        /* Estilos do Sistema de Vale */
        .date-info {
            background-color: #f0f8ff;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 25px;
            border-left: 4px solid #2a5298;
        }

        .vale-btn {
            background-color: #2a5298;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 10px 5px;
            width: 100%;
            max-width: 200px;
        }

        .vale-btn:hover {
            background-color: #1e3c72;
        }

        .vale-btn-secondary {
            background-color: #6c757d;
        }

        .vale-btn-secondary:hover {
            background-color: #5a6268;
        }

        .vale-btn-success {
            background-color: #28a745;
        }

        .vale-btn-success:hover {
            background-color: #218838;
        }

        .hidden {
            display: none !important;
        }

        .input-group {
            margin: 20px 0;
            text-align: left;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2a5298;
        }

        .message {
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .message-success {
            background-color: #d4edda;
            color: #155724;
        }

        .message-info {
            background-color: #d1ecf1;
            color: #0c5460;
        }

        .message-warning {
            background-color: #fff3cd;
            color: #856404;
        }

        .message-error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .days-left {
            font-weight: bold;
            color: #2a5298;
            font-size: 18px;
            margin: 10px 0;
        }

        .step {
            margin-bottom: 25px;
            text-align: left;
        }

        .step-number {
            display: inline-block;
            background-color: #2a5298;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-right: 10px;
            font-weight: bold;
        }

        .step-content {
            display: inline-block;
            width: calc(100% - 50px);
            vertical-align: top;
        }

        /* Modal de Lembrete */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal {
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            width: 90%;
            max-width: 500px;
            padding: 30px;
            text-align: center;
            animation: modalAppear 0.3s ease-out;
        }

        @keyframes modalAppear {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal h2 {
            color: #2a5298;
            margin-bottom: 15px;
        }

        .modal p {
            margin-bottom: 15px;
        }

        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .modal .vale-btn {
            margin: 5px;
        }

        /* Modal de Confirma√ß√£o Frigobar */
        #confirmationModal {
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            max-width: 300px;
            width: 80%;
        }

        .modal-content button {
            margin: 10px;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        #confirmExit {
            background-color: #e74c3c;
            color: white;
        }

        #confirmExit:hover {
            background-color: #c0392b;
        }

        #confirmCleaning {
            background-color: #3498db;
            color: white;
        }

        #confirmCleaning:hover {
            background-color: #2980b9;
        }

        .floor-title {
            text-align: center;
            font-weight: bold;
            margin: 15px 0 5px;
            grid-column: 1 / -1;
        }

        /* Estilos para os √≠cones */
        .item-with-icon {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .table-item-icon {
            width: 35px;
            height: 35px;
            object-fit: contain;
            border-radius: 4px;
            background: #f8f9fa;
            padding: 3px;
        }

        /* Bot√£o de instala√ß√£o */
        .install-button {
            background: #4CAF50;
            color: white;
            padding: 10px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .install-button:hover {
            background-color: #45a049;
        }

        /* Estilos da Cota√ß√£o de Reservas */
        .quotation-container {
            max-width: 100%;
            margin: 0 auto;
        }

        .language-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .lang-btn {
            padding: 8px 16px;
            border: 2px solid rgba(0,0,0,0.1);
            border-radius: 20px;
            background: #f8f9fa;
            color: #333;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
        }
        
        .lang-btn.active {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }
        
        .lang-btn:hover {
            background: #e9ecef;
        }

        .lang-btn.active:hover {
            background: #0056b3;
        }

        .calculator-title {
            font-size: 20px;
            font-weight: 700;
            color: #1a6bb3;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .form-input, .form-select {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #1a6bb3;
            box-shadow: 0 0 0 3px rgba(26, 107, 179, 0.1);
        }
        
        .radio-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-top: 8px;
        }
        
        .radio-label {
            display: flex;
            align-items: center;
            padding: 10px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
        }
        
        .radio-label:hover {
            border-color: #1a6bb3;
        }
        
        .radio-label.selected {
            border-color: #1a6bb3;
            background: #f0f7ff;
        }
        
        .radio-input {
            margin-right: 8px;
        }
        
        .meal-options {
            background: #f8fafc;
            padding: 12px;
            border-radius: 8px;
            margin-top: 8px;
            border-left: 4px solid #1a6bb3;
        }
        
        /* Room Configuration Styles */
        .room-configuration {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid #e0e0e0;
        }
        
        .room-config-title {
            font-size: 14px;
            font-weight: 700;
            color: #1a6bb3;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .add-room-btn {
            background: #1a6bb3;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .add-room-btn:hover {
            background: #155a9d;
            transform: translateY(-1px);
        }
        
        .room-item {
            background: white;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 8px;
            border: 1px solid #e0e0e0;
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .room-input {
            flex: 1;
            padding: 6px 10px;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            font-size: 12px;
        }
        
        .remove-room-btn {
            background: #ff6b6b;
            color: white;
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        
        .remove-room-btn:hover {
            background: #ff5252;
        }
        
        .rooms-summary {
            background: #e7f3ff;
            padding: 10px 12px;
            border-radius: 6px;
            margin-top: 8px;
            font-size: 12px;
            color: #1a6bb3;
            font-weight: 600;
        }
        
        .quotation-action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-top: 15px;
        }
        
        .quotation-action-btn {
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        
        .copy-btn {
            background: linear-gradient(135deg, #1a6bb3, #2c8cda);
            color: white;
        }
        
        .quotation-whatsapp-btn {
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
        }
        
        .quotation-action-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        /* Preview Styles */
        .quotation-preview {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-top: 20px;
            max-height: 70vh;
            overflow-y: auto;
        }
        
        .quotation-header {
            background: linear-gradient(135deg, #1a6bb3, #2c8cda);
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .quotation-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 15px 15px;
        }
        
        .hotel-name {
            font-size: 18px;
            font-weight: 800;
            color: white;
            margin-bottom: 5px;
            text-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }
        
        .quotation-title {
            font-size: 14px;
            font-weight: 600;
            color: rgba(255,255,255,0.9);
        }

        .quotation-badge {
            background: #ff6b6b;
            color: white;
            padding: 4px 10px;
            border-radius: 15px;
            font-weight: 700;
            font-size: 10px;
            display: inline-block;
            margin-top: 8px;
        }

        .validity-notice {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border-left: 4px solid #ffc107;
            padding: 10px 15px;
            font-weight: 600;
            color: #856404;
            font-size: 11px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .quotation-body {
            padding: 20px;
        }

        .section-title {
            font-size: 14px;
            color: #1a6bb3;
            font-weight: 700;
            margin-bottom: 12px;
            padding-bottom: 6px;
            border-bottom: 2px solid #eaeaea;
        }

        .details-grid {
            display: grid;
            gap: 10px;
            margin-bottom: 15px;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            border-bottom: 1px solid #f5f5f5;
        }

        .detail-label {
            font-weight: 600;
            color: #555;
            font-size: 12px;
        }

        .detail-value {
            color: #333;
            font-weight: 500;
            font-size: 12px;
        }

        .dates-container {
            display: flex;
            gap: 12px;
            margin: 15px 0;
        }

        .date-column {
            flex: 1;
            text-align: center;
            background: #f0f7ff;
            padding: 12px;
            border-radius: 8px;
            border: 2px solid #1a6bb3;
        }

        .date-label {
            font-size: 11px;
            color: #1a6bb3;
            font-weight: 700;
            margin-bottom: 4px;
            text-transform: uppercase;
        }

        .date-value {
            font-size: 13px;
            font-weight: 800;
            color: #1a6bb3;
            margin-bottom: 2px;
        }

        .date-time {
            font-size: 10px;
            color: #666;
        }

        .pricing-breakdown {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border: 1px solid #e0e0e0;
        }

        .price-row {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            border-bottom: 1px solid #eee;
            font-size: 12px;
        }

        .price-row:last-child {
            border-bottom: none;
        }

        .total-row {
            background: #1a6bb3;
            color: white;
            padding: 10px 12px;
            border-radius: 6px;
            margin-top: 8px;
            font-weight: 700;
            font-size: 13px;
        }

        .amenities-list {
            list-style: none;
            margin: 12px 0;
        }

        .amenities-list li {
            padding: 5px 0;
            font-size: 11px;
            color: #555;
            display: flex;
            align-items: center;
        }

        .amenities-list li::before {
            content: '‚úì';
            color: #4CAF50;
            font-weight: bold;
            margin-right: 6px;
        }

        .no-breakfast-notice {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 8px 12px;
            margin: 8px 0;
            border-radius: 0 6px 6px 0;
            font-size: 11px;
            color: #856404;
        }

        .meal-info-notice {
            background: #e7f3ff;
            border-left: 4px solid #1a6bb3;
            padding: 8px 12px;
            margin: 8px 0;
            border-radius: 0 6px 6px 0;
            font-size: 11px;
            color: #1a6bb3;
            font-weight: 600;
        }

        .quotation-footer {
            background: #1a6bb3;
            padding: 15px 20px;
            color: white;
            text-align: center;
        }

        .contact-info {
            font-size: 11px;
            line-height: 1.4;
            opacity: 0.9;
        }

        .policy-section {
            margin: 15px 0;
        }

        .policy-title {
            font-size: 12px;
            font-weight: 700;
            color: #1a6bb3;
            margin-bottom: 6px;
        }

        .policy-content {
            font-size: 11px;
            color: #555;
            line-height: 1.4;
        }

        .policy-notice {
            background: #f8fafc;
            border-left: 4px solid #1a6bb3;
            padding: 10px 12px;
            margin: 8px 0;
            border-radius: 0 6px 6px 0;
            font-size: 11px;
            color: #1a6bb3;
        }

        .warning-notice {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 10px 12px;
            margin: 8px 0;
            border-radius: 0 6px 6px 0;
            font-size: 11px;
            color: #856404;
        }

        /* Novos estilos para m√∫ltiplas datas */
        .date-periods-container {
            margin-bottom: 15px;
        }

        .date-period {
            background: white;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 8px;
            border: 1px solid #e0e0e0;
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .date-period-input {
            flex: 1;
            padding: 6px 10px;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            font-size: 12px;
        }

        .add-date-period-btn {
            background: #1a6bb3;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-bottom: 10px;
        }

        .add-date-period-btn:hover {
            background: #155a9d;
            transform: translateY(-1px);
        }

        /* Estilos para op√ß√£o de mostrar detalhes das refei√ß√µes */
        .show-meal-details-option {
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .show-meal-details-checkbox {
            width: 16px;
            height: 16px;
        }

        /* Estilos para impress√£o 40x80 */
        @media print {
            body * {
                visibility: hidden;
            }
            
            .thermal-print-content,
            .thermal-print-content * {
                visibility: visible;
            }
            
            .thermal-print-content {
                position: absolute;
                left: 0;
                top: 0;
                width: 40mm;
                min-height: 80mm;
                padding: 2mm;
                font-family: 'Courier New', monospace;
                font-size: 8px;
                line-height: 1.2;
                background: white;
                color: black;
                border: none;
                margin: 0;
                box-shadow: none;
            }
            
            .thermal-print-content .no-print {
                display: none !important;
            }
            
            @page {
                size: 40mm 80mm;
                margin: 0;
            }
        }

        @media (max-width: 480px) {
            .tab {
                padding: 12px 8px;
                font-size: 12px;
            }
            
            .apartment {
                width: calc(33% - 10px);
                font-size: 11px;
                padding: 6px;
            }
            
            .lavanderia-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .vale-btn {
                width: 100%;
                margin: 5px 0;
            }

            .radio-group {
                grid-template-columns: 1fr;
            }
            
            .dates-container {
                flex-direction: column;
            }
            
            .quotation-action-buttons {
                grid-template-columns: 1fr;
            }
            
            .room-item {
                flex-direction: column;
                gap: 6px;
            }
            
            .room-input {
                width: 100%;
            }

            .lang-btn {
                padding: 6px 12px;
                font-size: 10px;
            }

            .date-period {
                flex-direction: column;
                gap: 6px;
            }
            
            .date-period-input {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Modal de Confirma√ß√£o Frigobar -->
    <div id="confirmationModal">
        <div class="modal-content">
            <p>Foi sa√≠da ou arruma√ß√£o?</p>
            <button id="confirmExit">Sa√≠da</button>
            <button id="confirmCleaning">Arruma√ß√£o</button>
        </div>
    </div>

    <!-- Modal de Lembrete do Vale -->
    <div id="reminder-modal" class="modal-overlay hidden">
        <div class="modal">
            <h2>Lembrete de Solicita√ß√£o de Vale</h2>
            <p>Voc√™ ainda n√£o solicitou seu vale para este m√™s.</p>
            <p>O prazo para solicita√ß√£o √© entre os dias <strong>10 e 20</strong> de cada m√™s.</p>
            <p id="modal-days-left" class="days-left"></p>
            <div class="modal-buttons">
                <button id="modal-request-btn" class="vale-btn">Solicitar Agora</button>
                <button id="modal-close-btn" class="vale-btn vale-btn-secondary">Lembrar Depois</button>
            </div>
        </div>
    </div>

    <div class="app-container">
        <!-- Header -->
        <div class="app-header">
            <h1>Hotel App</h1>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" onclick="openTab('frigobar')">Frigobar</button>
            <button class="tab" onclick="openTab('lavanderia')">Lavanderia</button>
            <button class="tab" onclick="openTab('vale')">Solicitar Vale</button>
            <button class="tab" onclick="openTab('cotacao')">Cota√ß√£o</button>
        </div>

        <!-- Conte√∫do Frigobar -->
        <div id="frigobar" class="tab-content active">
            <h2>Frigobar</h2>

            <div class="input-apartment">
                <label for="apartmentNumber"><strong>N√∫mero do Apartamento:</strong></label>
                <input type="text" id="apartmentNumber" placeholder="Digite o n√∫mero do apartamento" />
            </div>

            <button id="show-apartments">Selecionar Apartamentos</button>

            <div class="apartment-list" id="apartment-list">
                <!-- Apartamentos ser√£o gerados aqui -->
            </div>

            <h3>Bebidas</h3>
            <div class="item-container" id="beverages">
                <div class="item">
                    <img src="agua.ico" alt="√Ågua Mineral s/G√°s" style="width: 50px; cursor: pointer;">
                    <span>√Ågua Mineral s/G√°s (500ml)</span>
                    <button class="remove">Remover</button>
                    <span class="quantity">0</span>
                    <span class="total">0</span>
                </div>
                <div class="item">
                    <img src="aguacomgas.ico" alt="√Ågua Mineral c/G√°s" style="width: 50px; cursor: pointer;">
                    <span>√Ågua Mineral c/G√°s (310ml)</span>
                    <button class="remove">Remover</button>
                    <span class="quantity">0</span>
                    <span class="total">0</span>
                </div>
                <div class="item">
                    <img src="cocacola.ico" alt="Coca-cola" style="width: 50px; cursor: pointer;">
                    <span>Coca-cola (lata 350ml)</span>
                    <button class="remove">Remover</button>
                    <span class="quantity">0</span>
                    <span class="total">0</span>
                </div>
                <div class="item">
                    <img src="fanta.ico" alt="Fanta" style="width: 50px; cursor: pointer;">
                    <span>Fanta (lata 350ml)</span>
                    <button class="remove">Remover</button>
                    <span class="quantity">0</span>
                    <span class="total">0</span>
                </div>
                <div class="item">
                    <img src="guarana.ico" alt="Guaran√°" style="width: 50px; cursor: pointer;">
                    <span>Guaran√° (lata 350ml)</span>
                    <button class="remove">Remover</button>
                    <span class="quantity">0</span>
                    <span class="total">0</span>
                </div>
                <div class="item">
                    <img src="toddynho.ico" alt="Toddynho" style="width: 50px; cursor: pointer;">
                    <span>Toddynho (200ml)</span>
                    <button class="remove">Remover</button>
                    <span class="quantity">0</span>
                    <span class="total">0</span>
                </div>
                <div class="item">
                    <img src="antarctica.ico" alt="Antarctica" style="width: 50px; cursor: pointer;">
                    <span>Antarctica (lata 350ml)</span>
                    <button class="remove">Remover</button>
                    <span class="quantity">0</span>
                    <span class="total">0</span>
                </div>
            </div>

            <h3>Snacks</h3>
            <div class="item-container" id="snacks">
                <div class="item">
                    <img src="castanhadecaju.ico" alt="Castanha de Caju" style="width: 50px; cursor: pointer;">
                    <span>Castanha de Caju (50g)</span>
                    <button class="remove">Remover</button>
                    <span class="quantity">0</span>
                    <span class="total">0</span>
                </div>
                <div class="item">
                    <img src="batata.ico" alt="Batata" style="width: 50px; cursor: pointer;">
                    <span>Batata (40g)</span>
                    <button class="remove">Remover</button>
                    <span class="quantity">0</span>
                    <span class="total">0</span>
                </div>
                <div class="item">
                    <img src="kitkat.ico" alt="Chocolate Kit Kat" style="width: 50px; cursor: pointer;">
                    <span>Chocolate Kit Kat (41,5g)</span>
                    <button class="remove">Remover</button>
                    <span class="quantity">0</span>
                    <span class="total">0</span>
                </div>
                <div class="item">
                    <img src="mentoscrazyfruit.ico" alt="Bala Mentos crazyfruit" style="width: 50px; cursor: pointer;">
                    <span>Bala Mentos crazyfruit (41,5g)</span>
                    <button class="remove">Remover</button>
                    <span class="quantity">0</span>
                    <span class="total">0</span>
                </div>
                <div class="item">
                    <img src="mentosmint.ico" alt="Bala Mentos mint" style="width: 50px; cursor: pointer;">
                    <span>Bala Mentos mint (41,5g)</span>
                    <button class="remove">Remover</button>
                    <span class="quantity">0</span>
                    <span class="total">0</span>
                </div>
            </div>

            <h3>Resumo de Custos</h3>
            <div id="summary">
                <p>Total Bebidas (R$): <span id="totalBeverages">0</span></p>
                <p>Total Snacks (R$): <span id="totalSnacks">0</span></p>
                <p>Custo Total (R$): <span id="totalCost">0</span></p>
            </div>

            <button class="send-whatsapp" id="send-frigobar-whatsapp">
                Enviar via WhatsApp
            </button>
        </div>

        <!-- Conte√∫do Lavanderia -->
        <div id="lavanderia" class="tab-content">
            <div class="lavanderia-header">
                <h2>Lavanderia</h2>
                <img src="https://ucarecdn.com/44a159d9-8c80-471b-aba4-0562076e8193/-/format/auto/" alt="Logo do ICARA√ç PRAIA HOTEL" class="lavanderia-logo">
                <input type="text" id="lavanderiaApartment" placeholder="Digite o apartamento" class="lavanderia-input">
                <button onclick="toggleApartmentList()" class="lavanderia-button">Selecionar Apartamento</button>
                
                <div id="lavanderiaApartmentList" class="lavanderia-grid" style="display: none;">
                    <!-- Apartamentos da lavanderia ser√£o gerados aqui -->
                </div>
            </div>

            <div id="lavanderiaContent" style="display: none;">
                <table class="lavanderia-table">
                    <thead>
                        <tr>
                            <th>Item</th>
                            <th>Lavar</th>
                            <th>Passar</th>
                            <th>Servi√ßo</th>
                        </tr>
                    </thead>
                    <tbody id="lavanderiaItems">
                        <!-- Itens da lavanderia ser√£o gerados aqui -->
                    </tbody>
                </table>

                <div id="lavanderiaResumo" class="resumo-section" style="display: none;">
                    <div class="resumo-header">
                        <h3>Resumo do Pedido</h3>
                        <button class="undo-btn" onclick="undoLastAction()">
                            <i class="fas fa-undo"></i> Desfazer
                        </button>
                    </div>
                    
                    <div id="resumoContent">
                        <!-- Conte√∫do do resumo ser√° gerado aqui -->
                    </div>
                    
                    <div class="total-section">
                        <div style="font-size: 1.2em; font-weight: bold; color: #333;">
                            Subtotal: R$ <span id="subtotal">0</span>,00
                        </div>
                        <div style="font-size: 1.1em; color: #666;">
                            Taxa: R$ <span id="iss">0.00</span>
                        </div>
                        <div style="font-size: 1.4em; font-weight: bold; color: #28a745;">
                            Total: R$ <span id="totalLavanderia">0.00</span>
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="whatsapp-btn" onclick="enviarWhatsAppLavanderia()">
                            <i class="fab fa-whatsapp"></i> Enviar pedido pelo WhatsApp
                        </button>
                        <button class="print-btn" onclick="imprimirPedido()">
                            <i class="fas fa-print"></i> Imprimir Pedido
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Conte√∫do Solicita√ß√£o de Vale -->
        <div id="vale" class="tab-content">
            <h2>Sistema de Solicita√ß√£o de Vale</h2>
            
            <div class="date-info">
                <p id="current-date">Carregando data...</p>
                <p id="day-status"></p>
                <p id="days-left"></p>
            </div>
            
            <!-- Mensagem de 13¬∫ sal√°rio -->
            <div id="thirteenth-salary-message" class="message message-error hidden">
                <p><strong>Devido ao 13¬∫ sal√°rio n√£o √© poss√≠vel solicitar vale este m√™s.</strong></p>
            </div>
            
            <!-- Tela inicial -->
            <div id="initial-screen">
                <p>Clique no bot√£o abaixo para solicitar seu vale deste m√™s.</p>
                <button id="request-btn" class="vale-btn">Solicitar Vale</button>
            </div>
            
            <!-- Tela de confirma√ß√£o -->
            <div id="confirmation-screen" class="hidden">
                <p>Deseja solicitar vale este m√™s?</p>
                <button id="yes-btn" class="vale-btn">Sim</button>
                <button id="no-btn" class="vale-btn vale-btn-secondary">N√£o</button>
            </div>
            
            <!-- Tela de nome do funcion√°rio -->
            <div id="name-screen" class="hidden">
                <div class="step">
                    <span class="step-number">1</span>
                    <div class="step-content">
                        <p>Informe seu nome completo:</p>
                    </div>
                </div>
                <div class="input-group">
                    <input type="text" id="name-input" placeholder="Digite seu nome completo">
                </div>
                <button id="confirm-name-btn" class="vale-btn">Confirmar Nome</button>
            </div>
            
            <!-- Tela de valor -->
            <div id="value-screen" class="hidden">
                <div class="step">
                    <span class="step-number">2</span>
                    <div class="step-content">
                        <p>Informe o valor desejado:</p>
                    </div>
                </div>
                <div class="input-group">
                    <input type="number" id="value-input" placeholder="R$ 0,00" min="0" step="0.01">
                </div>
                <button id="confirm-value-btn" class="vale-btn">Confirmar Valor</button>
            </div>
            
            <!-- Tela de confirma√ß√£o final -->
            <div id="final-screen" class="hidden">
                <div class="message message-success" id="success-message"></div>
                <div class="message message-info" id="info-message"></div>
                <button id="whatsapp-btn" class="vale-btn vale-btn-success">Enviar via WhatsApp</button>
                <button id="back-btn" class="vale-btn vale-btn-secondary">Voltar ao Frigobar</button>
            </div>
            
            <!-- Tela de recusa -->
            <div id="refusal-screen" class="hidden">
                <div class="message message-warning">
                    <p>Obrigado, n√£o desejo pedir vale</p>
                </div>
                <div class="message message-info" id="refusal-info"></div>
                <button id="refusal-whatsapp-btn" class="vale-btn vale-btn-success">Enviar via WhatsApp</button>
                <button id="refusal-back-btn" class="vale-btn vale-btn-secondary">Voltar ao Frigobar</button>
            </div>
        </div>

        <!-- Conte√∫do Cota√ß√£o de Reservas -->
        <div id="cotacao" class="tab-content">
            <div class="quotation-container">
                <h2>Cotador de Reservas</h2>
                <p style="text-align: center; margin-bottom: 15px; color: #666;">Icara√≠ Praia Hotel</p>
                
                <div class="language-selector">
                    <button class="lang-btn active" data-lang="pt">üáßüá∑ Portugu√™s</button>
                    <button class="lang-btn" data-lang="en">üá∫üá∏ English</button>
                    <button class="lang-btn" data-lang="fr">üá´üá∑ Fran√ßais</button>
                    <button class="lang-btn" data-lang="es">üá™üá∏ Espa√±ol</button>
                </div>
                
                <div class="calculator">
                    <div class="calculator-title" id="calculatorTitle">Informa√ß√µes da Reserva</div>
                    
                    <div class="form-group">
                        <label class="form-label" id="guestNameLabel">Nome do H√≥spede Principal</label>
                        <input type="text" class="form-input" id="guestName" placeholder="Digite o nome completo">
                    </div>
                    
                    <!-- Room Configuration Section -->
                    <div class="room-configuration">
                        <div class="room-config-title">
                            <span id="roomConfigLabel">Configura√ß√£o de Quartos</span>
                            <button class="add-room-btn" onclick="addRoom()" id="addRoomBtn">+ Adicionar Quarto</button>
                        </div>
                        
                        <div id="roomsContainer">
                            <!-- Room items will be added here dynamically -->
                            <div class="room-item">
                                <input type="number" class="room-input" min="1" value="1" placeholder="Quantidade" onchange="updateRoomsSummary()">
                                <select class="room-input" onchange="updateRoomsSummary()">
                                    <option value="1">1 H√≥spede</option>
                                    <option value="2">2 H√≥spedes</option>
                                    <option value="3">3 H√≥spedes</option>
                                    <option value="4">4 H√≥spedes</option>
                                </select>
                                <input type="number" class="room-input" min="0" step="0.01" placeholder="Di√°ria (R$)" onchange="updateRoomsSummary()">
                                <button class="remove-room-btn" onclick="removeRoom(this)" style="display: none;">√ó</button>
                            </div>
                        </div>
                        
                        <div class="rooms-summary" id="roomsSummary">
                            Total: 1 quarto(s) ‚Ä¢ 1 h√≥spede(s) ‚Ä¢ R$ 0,00/dia
                        </div>
                    </div>
                    
                    <!-- Date Periods Section -->
                    <div class="form-group">
                        <div class="room-config-title">
                            <span id="datePeriodsLabel">Per√≠odos de Estadia</span>
                            <button class="add-date-period-btn" onclick="addDatePeriod()" id="addDatePeriodBtn">+ Adicionar Per√≠odo</button>
                        </div>
                        
                        <div id="datePeriodsContainer">
                            <!-- Date periods will be added here dynamically -->
                            <div class="date-period">
                                <input type="date" class="date-period-input" id="checkIn0" onchange="calculateQuotation()">
                                <span>at√©</span>
                                <input type="date" class="date-period-input" id="checkOut0" onchange="calculateQuotation()">
                                <button class="remove-room-btn" onclick="removeDatePeriod(this)" style="display: none;">√ó</button>
                            </div>
                        </div>
                        
                        <div class="rooms-summary" id="datePeriodsSummary">
                            Total: 0 noite(s)
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" id="mealTypeLabel">Tipo de Refei√ß√£o</label>
                        <div class="radio-group">
                            <label class="radio-label" id="labelBreakfast">
                                <input type="radio" name="mealType" class="radio-input" value="breakfast" checked>
                                <span id="breakfastLabel">Com Caf√© da Manh√£</span>
                            </label>
                            <label class="radio-label" id="labelNoBreakfast">
                                <input type="radio" name="mealType" class="radio-input" value="noBreakfast">
                                <span id="noBreakfastLabel">Sem Caf√© da Manh√£</span>
                            </label>
                            <label class="radio-label" id="labelHalfBoard">
                                <input type="radio" name="mealType" class="radio-input" value="halfBoard">
                                <span id="halfBoardLabel">Meia Pens√£o (MAP)</span>
                            </label>
                            <label class="radio-label" id="labelFullBoard">
                                <input type="radio" name="mealType" class="radio-input" value="fullBoard">
                                <span id="fullBoardLabel">Pens√£o Completa (FAP)</span>
                            </label>
                        </div>
                        
                        <div class="meal-options" id="mealPriceSection" style="display: none;">
                            <label class="form-label" id="mealPriceLabel">Valor por Refei√ß√£o (por pessoa)</label>
                            <input type="number" class="form-input" id="mealPrice" min="0" step="0.01" placeholder="R$ 0,00">
                        </div>
                        
                        <!-- Op√ß√£o para mostrar detalhes das refei√ß√µes no voucher -->
                        <div class="show-meal-details-option">
                            <input type="checkbox" id="showMealDetails" class="show-meal-details-checkbox" checked onchange="calculateQuotation()">
                            <label for="showMealDetails" id="showMealDetailsLabel">Mostrar detalhes das refei√ß√µes no voucher</label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" id="parkingLabel">Estacionamento</label>
                        <select class="form-select" id="parking">
                            <option value="no">N√£o</option>
                            <option value="yes">Sim</option>
                        </select>
                    </div>
                    
                    <div class="quotation-action-buttons">
                        <button class="quotation-action-btn copy-btn" onclick="copyQuotation()">
                            üìã <span id="copyButtonText">Copiar Cota√ß√£o</span>
                        </button>
                        <button class="quotation-action-btn quotation-whatsapp-btn" onclick="shareWhatsApp()">
                            üí¨ <span id="whatsappButtonText">Enviar por WhatsApp</span>
                        </button>
                    </div>
                </div>
                
                <!-- Preview -->
                <div class="quotation-preview" id="quotationPreview">
                    <!-- O conte√∫do do voucher ser√° gerado aqui dinamicamente -->
                </div>
            </div>
        </div>

        <button class="install-button" id="install-button" style="display: none;">
            +
        </button>
    </div>

    <script>
        // ========== SISTEMA DE NAVEGA√á√ÉO ENTRE ABAS ==========
        function openTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            const tabButtons = document.querySelectorAll('.tab');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            tabButtons.forEach(button => button.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.currentTarget.classList.add('active');
            
            // Inicializar sistemas quando acessados pela primeira vez
            if (tabName === 'lavanderia' && !lavanderiaInitialized) {
                initializeLavanderia();
                lavanderiaInitialized = true;
            }
            
            // Inicializar sistema de cota√ß√£o quando acessado
            if (tabName === 'cotacao' && !quotationInitialized) {
                initializeQuotationSystem();
                quotationInitialized = true;
            }
        }

        // ========== SISTEMA FRIGOBAR ==========
        // ========== SISTEMA FRIGOBAR (CORRIGIDO) ==========
document.addEventListener('DOMContentLoaded', function() {
    initializeFrigobar();
    initializeValeSystem();
});

function initializeFrigobar() {
    // Pre√ßos dos itens
    const prices = {
        '√Ågua Mineral s/G√°s (500ml)': 9,
        '√Ågua Mineral c/G√°s (310ml)': 9,
        'Coca-cola (lata 350ml)': 10,
        'Fanta (lata 350ml)': 10,
        'Guaran√° (lata 350ml)': 10,
        'Toddynho (200ml)': 12,
        'Antarctica (lata 350ml)': 14,
        'Castanha de Caju (50g)': 19,
        'Batata (40g)': 12,
        'Chocolate Kit Kat (41,5g)': 12,
        'Bala Mentos crazyfruit (41,5g)': 10,
        'Bala Mentos mint (41,5g)': 10
    };

    // CORRE√á√ÉO: Configurar eventos UMA √öNICA VEZ
    document.querySelectorAll('.item').forEach(item => {
        const img = item.querySelector('img');
        const removeBtn = item.querySelector('.remove');
        const itemName = item.querySelector('span').textContent;
        const price = prices[itemName];
        
        // Remover event listeners anteriores para evitar duplica√ß√£o
        const newImg = img.cloneNode(true);
        img.parentNode.replaceChild(newImg, img);
        
        const newRemoveBtn = removeBtn.cloneNode(true);
        removeBtn.parentNode.replaceChild(newRemoveBtn, removeBtn);
        
        // Adicionar novo evento √† imagem (clonada)
        newImg.addEventListener('click', () => {
            console.log('Clicou na imagem:', itemName); // Para debug
            addItem(item, price);
        });
        
        // Adicionar novo evento ao bot√£o remover (clonado)
        newRemoveBtn.addEventListener('click', () => {
            console.log('Clicou em remover:', itemName); // Para debug
            removeItem(item, price);
        });
    });

    // Gerar apartamentos
    const apartmentList = document.getElementById('apartment-list');
    
    // Limpar lista existente para evitar duplica√ß√£o
    apartmentList.innerHTML = '';
    
    for (let floor = 3; floor <= 10; floor++) {
        const floorDiv = document.createElement('div');
        floorDiv.classList.add('floor');
        const floorTitle = document.createElement('h4');
        floorTitle.textContent = `Andar ${floor}`;
        floorDiv.appendChild(floorTitle);

        const roomCount = floor === 10 ? 7 : 8;
        for (let room = 1; room <= roomCount; room++) {
            const apartment = floor === 10 ? `100${room}` : `${floor}0${room}`;
            const apartmentDiv = document.createElement('div');
            apartmentDiv.classList.add('apartment');
            apartmentDiv.textContent = apartment;
            apartmentDiv.addEventListener('click', () => {
                document.getElementById('apartmentNumber').value = apartment;
                apartmentList.style.display = 'none';
            });
            floorDiv.appendChild(apartmentDiv);
        }
        apartmentList.appendChild(floorDiv);
    }

    // Bot√£o mostrar/ocultar apartamentos
    const showApartmentsBtn = document.getElementById('show-apartments');
    // Clonar e substituir para evitar duplica√ß√£o de eventos
    const newShowApartmentsBtn = showApartmentsBtn.cloneNode(true);
    showApartmentsBtn.parentNode.replaceChild(newShowApartmentsBtn, showApartmentsBtn);
    
    newShowApartmentsBtn.addEventListener('click', () => {
        const list = document.getElementById('apartment-list');
        list.style.display = list.style.display === 'none' ? 'block' : 'none';
    });

    // WhatsApp do Frigobar
    const sendWhatsAppBtn = document.getElementById('send-frigobar-whatsapp');
    const newSendWhatsAppBtn = sendWhatsAppBtn.cloneNode(true);
    sendWhatsAppBtn.parentNode.replaceChild(newSendWhatsAppBtn, sendWhatsAppBtn);
    
    newSendWhatsAppBtn.addEventListener('click', sendFrigobarWhatsApp);

    // Modal do Frigobar
    document.getElementById('confirmExit').addEventListener('click', () => sendFrigobarMessage(true));
    document.getElementById('confirmCleaning').addEventListener('click', () => sendFrigobarMessage(false));
}

function addItem(item, price) {
    console.log('addItem chamado para:', item.querySelector('span').textContent); // Debug
    
    const quantityElement = item.querySelector('.quantity');
    const totalElement = item.querySelector('.total');

    let quantity = parseInt(quantityElement.textContent) + 1;
    quantityElement.textContent = quantity;

    let total = quantity * price;
    totalElement.textContent = total.toFixed(2);

    updateFrigobarSummary();
}

function removeItem(item, price) {
    console.log('removeItem chamado para:', item.querySelector('span').textContent); // Debug
    
    const quantityElement = item.querySelector('.quantity');
    const totalElement = item.querySelector('.total');

    let quantity = parseInt(quantityElement.textContent);
    if (quantity > 0) {
        quantity -= 1;
        quantityElement.textContent = quantity;
        let total = quantity * price;
        totalElement.textContent = total.toFixed(2);
    }

    updateFrigobarSummary();
}

function updateFrigobarSummary() {
    const beverageItems = document.querySelectorAll('#beverages .item');
    const snackItems = document.querySelectorAll('#snacks .item');

    let totalBeverages = 0;
    let totalSnacks = 0;

    beverageItems.forEach(item => {
        totalBeverages += parseFloat(item.querySelector('.total').textContent);
    });

    snackItems.forEach(item => {
        totalSnacks += parseFloat(item.querySelector('.total').textContent);
    });

    const totalCost = totalBeverages + totalSnacks;

    document.getElementById('totalBeverages').textContent = totalBeverages.toFixed(2);
    document.getElementById('totalSnacks').textContent = totalSnacks.toFixed(2);
    document.getElementById('totalCost').textContent = totalCost.toFixed(2);
}

function sendFrigobarWhatsApp() {
    const apartmentNumber = document.getElementById('apartmentNumber').value.trim();

    if (!apartmentNumber) {
        alert("Por favor, insira o n√∫mero do apartamento.");
        return;
    }

    document.getElementById('confirmationModal').style.display = 'flex';
}

function sendFrigobarMessage(isExit) {
    const apartmentNumber = document.getElementById('apartmentNumber').value.trim();
    const status = isExit ? ' (Sa√≠da)' : ' (Arruma√ß√£o)';

    let message = `*Uh: ${apartmentNumber}${status} - Frigobar* \n\n`;

    // Coleta os itens de bebidas
    document.querySelectorAll('#beverages .item').forEach(item => {
        const name = item.querySelector('span').textContent;
        const quantity = item.querySelector('.quantity').textContent;
        if (parseInt(quantity) > 0) {
            message += `*${quantity}* ${name}\n`;
        }
    });

    // Coleta os itens de snacks
    document.querySelectorAll('#snacks .item').forEach(item => {
        const name = item.querySelector('span').textContent;
        const quantity = item.querySelector('.quantity').textContent;
        if (parseInt(quantity) > 0) {
            message += `*${quantity}* ${name}\n`;
        }
    });

    // Adiciona o custo total √† mensagem
    const totalCost = document.getElementById('totalCost').textContent;
    message += `\n*Custo Total: R$ ${totalCost}*`;

    const encodedMessage = encodeURIComponent(message);
    const whatsappUrl = 'https://wa.me/?text=' + encodedMessage;

    document.getElementById('confirmationModal').style.display = 'none';
    window.open(whatsappUrl, '_blank');
}
        // ========== SISTEMA LAVANDERIA ==========
        let lavanderiaInitialized = false;
        let lavanderiaItems = [];
        let lavanderiaHistory = [];
        let lavanderiaApartment = '';

        // Lista de itens da lavanderia
        const lavanderiaItemsList = [
            { nome: "Bermuda", lavar: 21, passar: 13, icon: "Bermuda.ico" },
            { nome: "Blusa", lavar: 21, passar: 13, icon: "Blusa.ico" },
            { nome: "Cal√ßa comprida", lavar: 27, passar: 16, icon: "Cal√ßa comprida.ico" },
            { nome: "Calcinha", lavar: 9, passar: 6, icon: "Calcinha.ico" },
            { nome: "Camiseta", lavar: 16, passar: 9, icon: "Camiseta.ico" },
            { nome: "Camiseta Regata", lavar: 13, passar: 8, icon: "Camiseta Regata.ico" },
            { nome: "Camisa Social", lavar: 24, passar: 18, icon: "Camisa Social.ico" },
            { nome: "Camisola", lavar: 24, passar: 15, icon: "Camisola.ico" },
            { nome: "Cueca", lavar: 9, passar: 6, icon: "Cueca.ico" },
            { nome: "Jaleco", lavar: 21, passar: 16, icon: "Jaleco.ico" },
            { nome: "Jaqueta", lavar: 48, passar: 27, icon: "Jaqueta.ico" },
            { nome: "Luvas", lavar: 23, passar: null, icon: "Luvas.ico" },
            { nome: "Macac√£o", lavar: 51, passar: 32, icon: "Macac√£o.ico" },
            { nome: "Meias (par)", lavar: 11, passar: 6, icon: "Meias.ico" },
            { nome: "Pijama", lavar: 21, passar: 18, icon: "Pijama.ico" },
            { nome: "Roupa de Beb√™", lavar: 14, passar: 9, icon: "Roupa de Beb√™.ico" },
            { nome: "Roupa infantil", lavar: 20, passar: 17, icon: "Roupa infantil.ico" },
            { nome: "Saia", lavar: 27, passar: 16, icon: "Saia.ico" },
            { nome: "Saia Longa", lavar: 32, passar: 21, icon: "Saia Longa.ico" },
            { nome: "Short", lavar: 16, passar: 11, icon: "Short.ico" },
            { nome: "Suti√£", lavar: 11, passar: null, icon: "Suti√£.ico" },
            { nome: "Toalha de banho", lavar: 23, passar: null, icon: "Toalha de banho.ico" },
            { nome: "Toalha de Rosto", lavar: 17, passar: null, icon: "Toalha de Rosto.ico" },
            { nome: "T√™nis", lavar: 63, passar: null, icon: "T√™nis.ico" },
            { nome: "Vestido", lavar: 58, passar: 42, icon: "Vestido.ico" },
            { nome: "Vestido Longo", lavar: 79, passar: 53, icon: "Vestido Longo.ico" }
        ];

        function initializeLavanderia() {
            generateLavanderiaApartments();
            renderLavanderiaItems();
        }

        function generateLavanderiaApartments() {
            const container = document.getElementById('lavanderiaApartmentList');
            container.innerHTML = '';
            
            for (let floor = 3; floor <= 10; floor++) {
                // Adiciona t√≠tulo do andar
                const floorTitle = document.createElement('div');
                floorTitle.className = 'floor-title';
                floorTitle.textContent = `${floor}¬∫ Andar`;
                container.appendChild(floorTitle);
                
                const numApts = floor === 10 ? 7 : 8;
                for (let apt = 1; apt <= numApts; apt++) {
                    const apartmentNum = floor === 10 ? `10${apt.toString().padStart(2, '0')}` : `${floor}${apt.toString().padStart(2, '0')}`;
                    const aptButton = document.createElement('button');
                    aptButton.className = 'lavanderia-apartment';
                    aptButton.textContent = apartmentNum;
                    aptButton.onclick = () => {
                        lavanderiaApartment = apartmentNum;
                        document.getElementById('lavanderiaApartment').value = apartmentNum;
                        document.getElementById('lavanderiaApartmentList').style.display = 'none';
                        document.getElementById('lavanderiaContent').style.display = 'block';
                    };
                    container.appendChild(aptButton);
                }
            }
        }

        function toggleApartmentList() {
            const list = document.getElementById('lavanderiaApartmentList');
            list.style.display = list.style.display === 'none' ? 'grid' : 'none';
        }

        function renderLavanderiaItems() {
            const container = document.getElementById('lavanderiaItems');
            container.innerHTML = '';
            
            lavanderiaItemsList.forEach(item => {
                const lavarItem = lavanderiaItems.find(i => i.nome === item.nome && i.tipo === 'lavar');
                const passarItem = lavanderiaItems.find(i => i.nome === item.nome && i.tipo === 'passar');
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <div class="item-with-icon">
                            <img src="${item.icon}" alt="${item.nome}" class="table-item-icon">
                            <span>${item.nome}</span>
                        </div>
                    </td>
                    <td>
                        <div style="display: flex; align-items: center; gap: 5px;">
                            <span>${item.lavar},00</span>
                            ${lavarItem ? `<span class="service-badge">${lavarItem.quantidade}x</span>` : ''}
                        </div>
                    </td>
                    <td>
                        <div style="display: flex; align-items: center; gap: 5px;">
                            ${item.passar ? `<span>${item.passar},00</span>` : '-'}
                            ${passarItem ? `<span class="service-badge">${passarItem.quantidade}x</span>` : ''}
                        </div>
                    </td>
                    <td>
                        <button class="service-button lavar-btn" onclick="addLavanderiaItem('${item.nome}', 'lavar')">
                            Lavar
                        </button>
                        ${item.passar ? `
                        <button class="service-button passar-btn" onclick="addLavanderiaItem('${item.nome}', 'passar')">
                            Passar
                        </button>
                        ` : ''}
                    </td>
                `;
                container.appendChild(row);
            });
        }

        function addLavanderiaItem(nome, tipo) {
            const item = lavanderiaItemsList.find(i => i.nome === nome);
            if (!item) return;
            
            const existingIndex = lavanderiaItems.findIndex(i => i.nome === nome && i.tipo === tipo);
            
            lavanderiaHistory.push({ type: 'add', previousItems: [...lavanderiaItems] });
            
            if (existingIndex !== -1) {
                lavanderiaItems[existingIndex].quantidade += 1;
            } else {
                lavanderiaItems.push({
                    ...item,
                    tipo,
                    quantidade: 1
                });
            }
            
            renderLavanderiaItems();
            updateLavanderiaResumo();
            document.getElementById('lavanderiaResumo').style.display = 'block';
        }

        function removeLavanderiaItem(nome, tipo) {
            const index = lavanderiaItems.findIndex(item => item.nome === nome && item.tipo === tipo);
            if (index === -1) return;
            
            lavanderiaHistory.push({ type: 'remove', previousItems: [...lavanderiaItems] });
            
            lavanderiaItems[index].quantidade -= 1;
            if (lavanderiaItems[index].quantidade === 0) {
                lavanderiaItems.splice(index, 1);
            }
            
            renderLavanderiaItems();
            updateLavanderiaResumo();
            
            if (lavanderiaItems.length === 0) {
                document.getElementById('lavanderiaResumo').style.display = 'none';
            }
        }

        function undoLastAction() {
            if (lavanderiaHistory.length === 0) return;
            
            const lastAction = lavanderiaHistory[lavanderiaHistory.length - 1];
            lavanderiaItems = lastAction.previousItems;
            lavanderiaHistory.pop();
            
            renderLavanderiaItems();
            updateLavanderiaResumo();
            
            if (lavanderiaItems.length === 0) {
                document.getElementById('lavanderiaResumo').style.display = 'none';
            }
        }

        function updateLavanderiaResumo() {
            const subtotal = lavanderiaItems.reduce((acc, item) => {
                return acc + (item.tipo === 'lavar' ? item.lavar : item.passar) * item.quantidade;
            }, 0);
            
            const iss = subtotal * 0.00;
            const total = subtotal + iss;
            
            document.getElementById('subtotal').textContent = subtotal;
            document.getElementById('iss').textContent = iss.toFixed(2);
            document.getElementById('totalLavanderia').textContent = total.toFixed(2);
            
            // Agrupar itens por tipo
            const groupedItems = lavanderiaItems.reduce((acc, item) => {
                const key = item.tipo;
                if (!acc[key]) acc[key] = [];
                
                const existing = acc[key].find(i => i.nome === item.nome);
                if (existing) {
                    existing.quantidade += item.quantidade;
                } else {
                    acc[key].push({ ...item });
                }
                return acc;
            }, {});
            
            const resumoContent = document.getElementById('resumoContent');
            resumoContent.innerHTML = '';
            
            Object.entries(groupedItems).forEach(([tipo, items]) => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'servico-category';
                
                const header = document.createElement('div');
                header.className = 'category-header';
                header.innerHTML = `
                    <i class="fas ${tipo === 'lavar' ? 'fa-tshirt' : 'fa-iron'}" style="margin-right: 8px;"></i>
                    ${tipo === 'lavar' ? 'Lavar' : 'Passar'}
                    <span style="margin-left: auto; font-size: 0.9em; color: #666;">
                        ${items.length} ${items.length === 1 ? 'item' : 'itens'}
                    </span>
                `;
                
                categoryDiv.appendChild(header);
                
                items.forEach(item => {
                    const itemRow = document.createElement('div');
                    itemRow.className = 'item-row';
                    itemRow.innerHTML = `
                        <div class="item-info">
                            <img src="${item.icon}" alt="${item.nome}" class="item-icon">
                            <div>
                                <div style="font-weight: bold;">${item.nome}</div>
                                <div style="font-size: 0.9em; color: #666;">
                                    ${tipo === 'lavar' ? item.lavar : item.passar},00 cada
                                </div>
                            </div>
                        </div>
                        <div class="item-controls">
                            <div class="quantity-controls">
                                <button class="qty-btn" onclick="removeLavanderiaItem('${item.nome}', '${tipo}')">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <span style="width: 30px; text-align: center; font-weight: bold;">${item.quantidade}</span>
                                <button class="qty-btn" onclick="addLavanderiaItem('${item.nome}', '${tipo}')">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                            <div class="item-total">
                                R$ ${((tipo === 'lavar' ? item.lavar : item.passar) * item.quantidade)},00
                            </div>
                        </div>
                    `;
                    categoryDiv.appendChild(itemRow);
                });
                
                resumoContent.appendChild(categoryDiv);
            });
        }

        function enviarWhatsAppLavanderia() {
            if (!lavanderiaApartment) {
                alert('Por favor, selecione um apartamento.');
                return;
            }
            
            const groupedItems = lavanderiaItems.reduce((acc, item) => {
                const key = item.tipo;
                if (!acc[key]) acc[key] = [];
                
                const existing = acc[key].find(i => i.nome === item.nome);
                if (existing) {
                    existing.quantidade += item.quantidade;
                } else {
                    acc[key].push({ ...item });
                }
                return acc;
            }, {});
            
            const subtotal = lavanderiaItems.reduce((acc, item) => {
                return acc + (item.tipo === 'lavar' ? item.lavar : item.passar) * item.quantidade;
            }, 0);
            
            const iss = subtotal * 0.00;
            const total = subtotal + iss;
            
            let message = `*ICARA√ç PRAIA HOTEL LTDA*\n`;
            message += `CNPJ: 27.890.847/0001-45\n`;
            message += `RUA BELISARIO AUGUSTO 21,\n`;
            message += `Bairro: Icara√≠\n`;
            message += `Cidade: NITER√ìI\n`;
            message += `24.230-200 RJ\n`;
            message += `Data: ${new Date().toLocaleDateString('pt-BR')}\n\n`;
            message += `*COMANDA DE LAVANDERIA*\n`;
            message += `Apartamento: ${lavanderiaApartment}\n\n`;
            
            Object.entries(groupedItems).forEach(([tipo, items]) => {
                message += `${tipo === 'lavar' ? 'LAVAR' : 'PASSAR'}:\n`;
                items.forEach(item => {
                    message += `${item.nome}\n`;
                    message += `Quantidade: ${item.quantidade}x\n`;
                    message += `Valor unit√°rio: R$ ${tipo === 'lavar' ? item.lavar : item.passar},00\n`;
                    message += `Total: R$ ${(tipo === 'lavar' ? item.lavar : item.passar) * item.quantidade},00\n\n`;
                });
            });
            
            message += `\nSubtotal: R$ ${subtotal},00\n`;
            message += `: R$ ${iss.toFixed(2)}\n`;
            message += `*Total: R$ ${total.toFixed(2)}*`;
            
            const encodedMessage = encodeURIComponent(message);
            window.open(`https://wa.me/?text=${encodedMessage}`, '_blank');
        }

        function imprimirPedido() {
            if (!lavanderiaApartment) {
                alert('Por favor, selecione um apartamento.');
                return;
            }
            
            // Agrupar itens por tipo
            const groupedItems = lavanderiaItems.reduce((acc, item) => {
                const key = item.tipo;
                if (!acc[key]) acc[key] = [];
                
                const existing = acc[key].find(i => i.nome === item.nome);
                if (existing) {
                    existing.quantidade += item.quantidade;
                } else {
                    acc[key].push({ ...item });
                }
                return acc;
            }, {});
            
            // Calcular totais
            const subtotal = lavanderiaItems.reduce((acc, item) => {
                return acc + (item.tipo === 'lavar' ? item.lavar : item.passar) * item.quantidade;
            }, 0);
            
            const iss = subtotal * 0.00;
            const total = subtotal + iss;
            
            // Gerar n√∫mero de comanda √∫nico
            const comandaNumber = 'CMD' + Date.now().toString().slice(-6);
            
            // Criar janela de impress√£o
            const printWindow = window.open('', '_blank', 'width=400,height=600');
            
            // HTML para impress√£o 40x80
            printWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Comanda de Lavanderia</title>
                    <style>
                        @import url('https://fonts.googleapis.com/css2?family=Libre+Barcode+39&display=swap');
                        @import url('https://fonts.googleapis.com/css2?family=Courier+Prime&display=swap');
                        
                        * {
                            margin: 0;
                            padding: 0;
                            box-sizing: border-box;
                        }
                        
                        body {
                            font-family: 'Courier Prime', monospace;
                            font-size: 9px;
                            line-height: 1.2;
                            width: 40mm;
                            min-height: 80mm;
                            padding: 2mm;
                            color: #000;
                        }
                        
                        @page {
                            size: 40mm 80mm;
                            margin: 0;
                        }
                        
                        .header {
                            text-align: center;
                            margin-bottom: 3px;
                        }
                        
                        .hotel-name {
                            font-weight: bold;
                            font-size: 10px;
                            margin-bottom: 1px;
                        }
                        
                        .hotel-info {
                            font-size: 7px;
                            margin-bottom: 2px;
                        }
                        
                        .divider {
                            border-top: 1px dashed #000;
                            margin: 3px 0;
                            width: 100%;
                        }
                        
                        .comanda-title {
                            font-weight: bold;
                            text-align: center;
                            font-size: 10px;
                            margin: 3px 0;
                        }
                        
                        .info-row {
                            display: flex;
                            justify-content: space-between;
                            margin: 2px 0;
                            font-size: 8px;
                        }
                        
                        .section-title {
                            font-weight: bold;
                            text-align: center;
                            background: #f0f0f0;
                            padding: 1px;
                            margin: 2px 0;
                            font-size: 9px;
                        }
                        
                        .item-row {
                            display: flex;
                            justify-content: space-between;
                            margin: 1px 0;
                            padding: 1px 0;
                            border-bottom: 0.5px dashed #ddd;
                        }
                        
                        .item-name {
                            flex: 2;
                        }
                        
                        .item-qty {
                            flex: 0.5;
                            text-align: center;
                        }
                        
                        .item-price {
                            flex: 1;
                            text-align: right;
                        }
                        
                        .item-total {
                            flex: 1;
                            text-align: right;
                            font-weight: bold;
                        }
                        
                        .total-section {
                            margin-top: 4px;
                            padding-top: 3px;
                            border-top: 2px solid #000;
                        }
                        
                        .total-row {
                            display: flex;
                            justify-content: space-between;
                            margin: 1px 0;
                        }
                        
                        .grand-total {
                            font-weight: bold;
                            font-size: 10px;
                            padding-top: 2px;
                            border-top: 1px solid #000;
                        }
                        
                        .barcode {
                            font-family: 'Libre Barcode 39', monospace;
                            font-size: 16px;
                            text-align: center;
                            margin: 4px 0;
                            letter-spacing: 1px;
                        }
                        
                        .footer {
                            text-align: center;
                            font-size: 6px;
                            color: #666;
                            margin-top: 4px;
                        }
                        
                        .warning {
                            font-size: 7px;
                            margin: 3px 0;
                            padding: 2px;
                            border-left: 2px solid #000;
                            background: #f8f8f8;
                        }
                        
                        .cut-line {
                            text-align: center;
                            font-size: 7px;
                            color: #999;
                            margin-top: 5px;
                            border-top: 1px dashed #999;
                            padding-top: 2px;
                        }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <div class="hotel-name">ICARA√ç PRAIA HOTEL</div>
                        <div class="hotel-info">
                            CNPJ: 27.890.847/0001-45<br>
                            RUA BELISARIO AUGUSTO 21, ICARA√ç<br>
                            NITER√ìI - 24.230-200 RJ
                        </div>
                    </div>
                    
                    <div class="divider"></div>
                    
                    <div class="comanda-title">COMANDA DE LAVANDERIA</div>
                    
                    <div class="info-row">
                        <div>
                            <strong>N¬∫:</strong> ${comandaNumber}<br>
                            <strong>Apto:</strong> ${lavanderiaApartment}
                        </div>
                        <div style="text-align: right;">
                            <strong>Data:</strong> ${new Date().toLocaleDateString('pt-BR')}<br>
                            <strong>Hora:</strong> ${new Date().toLocaleTimeString('pt-BR', {hour: '2-digit', minute:'2-digit'})}
                        </div>
                    </div>
                    
                    <div class="divider"></div>
                    
                    <!-- Itens Lavar -->
                    ${groupedItems['lavar'] && groupedItems['lavar'].length > 0 ? `
                    <div class="section-title">LAVAR</div>
                    ${groupedItems['lavar'].map(item => `
                        <div class="item-row">
                            <div class="item-name">${item.nome}</div>
                            <div class="item-qty">${item.quantidade}x</div>
                            <div class="item-price">R$ ${item.lavar},00</div>
                            <div class="item-total">R$ ${item.lavar * item.quantidade},00</div>
                        </div>
                    `).join('')}
                    ` : ''}
                    
                    <!-- Itens Passar -->
                    ${groupedItems['passar'] && groupedItems['passar'].length > 0 ? `
                    <div class="section-title">PASSAR</div>
                    ${groupedItems['passar'].map(item => `
                        <div class="item-row">
                            <div class="item-name">${item.nome}</div>
                            <div class="item-qty">${item.quantidade}x</div>
                            <div class="item-price">R$ ${item.passar},00</div>
                            <div class="item-total">R$ ${item.passar * item.quantidade},00</div>
                        </div>
                    `).join('')}
                    ` : ''}
                    
                    <div class="divider"></div>
                    
                    <!-- Totais -->
                    <div class="total-section">
                        <div class="total-row">
                            <div>SUBTOTAL:</div>
                            <div>R$ ${subtotal},00</div>
                        </div>
                        <div class="total-row">
                            <div>R$ ${iss.toFixed(2)}</div>
                        </div>
                        <div class="total-row grand-total">
                            <div>TOTAL:</div>
                            <div>R$ ${total.toFixed(2)}</div>
                        </div>
                    </div>
                    
                    <div class="divider"></div>
                    
                    <!-- C√≥digo de barras -->
                    <div class="barcode">*${comandaNumber}*</div>
                    <div style="text-align: center; font-size: 7px;">${comandaNumber}</div>
                    
                    <!-- Rodap√© -->
                    <div class="footer">
                        Obrigado pela prefer√™ncia!<br>
                        (21) 2612-5030 ‚Ä¢ lavanderia@icaraipraiahotel.com.br
                    </div>
                    
                    <div class="cut-line">--- Corte aqui ---</div>
                    
                    <script>
                        // Auto-print
                        setTimeout(() => {
                            window.print();
                            setTimeout(() => {
                                window.close();
                            }, 1000);
                        }, 500);
                    <\/script>
                </body>
                </html>
            `);
            
            printWindow.document.close();
        }

        // ========== SISTEMA DE VALE ==========
        function initializeValeSystem() {
            // Elementos da interface
            const currentDateEl = document.getElementById('current-date');
            const dayStatusEl = document.getElementById('day-status');
            const daysLeftEl = document.getElementById('days-left');
            const thirteenthSalaryMessage = document.getElementById('thirteenth-salary-message');
            const requestBtn = document.getElementById('request-btn');
            const yesBtn = document.getElementById('yes-btn');
            const noBtn = document.getElementById('no-btn');
            const confirmNameBtn = document.getElementById('confirm-name-btn');
            const nameInput = document.getElementById('name-input');
            const confirmValueBtn = document.getElementById('confirm-value-btn');
            const valueInput = document.getElementById('value-input');
            const whatsappBtn = document.getElementById('whatsapp-btn');
            const backBtn = document.getElementById('back-btn');
            const refusalWhatsappBtn = document.getElementById('refusal-whatsapp-btn');
            const refusalBackBtn = document.getElementById('refusal-back-btn');
            
            // Elementos do modal
            const reminderModal = document.getElementById('reminder-modal');
            const modalRequestBtn = document.getElementById('modal-request-btn');
            const modalCloseBtn = document.getElementById('modal-close-btn');
            const modalDaysLeft = document.getElementById('modal-days-left');
            
            // Telas
            const initialScreen = document.getElementById('initial-screen');
            const confirmationScreen = document.getElementById('confirmation-screen');
            const nameScreen = document.getElementById('name-screen');
            const valueScreen = document.getElementById('value-screen');
            const finalScreen = document.getElementById('final-screen');
            const refusalScreen = document.getElementById('refusal-screen');
            
            // Mensagens
            const successMessage = document.getElementById('success-message');
            const infoMessage = document.getElementById('info-message');
            const refusalInfo = document.getElementById('refusal-info');
            
            // Vari√°veis de estado
            let selectedValue = 0;
            let employeeName = "";
            let isRequestPeriod = false;
            let daysRemaining = 0;
            let isThirteenthSalaryMonth = false;

            // Verificar se est√° no per√≠odo de solicita√ß√£o (dias 10 a 20) e se √© novembro/dezembro
            function checkDate() {
                const today = new Date();
                const day = today.getDate();
                const month = today.getMonth() + 1; // Janeiro = 1, Dezembro = 12
                const year = today.getFullYear();
                
                // Formatar data para exibi√ß√£o
                const formattedDate = `${day.toString().padStart(2, '0')}/${month.toString().padStart(2, '0')}/${year}`;
                currentDateEl.textContent = `Hoje √© ${formattedDate}`;
                
                // Verificar se √© novembro (11) ou dezembro (12) - meses do 13¬∫ sal√°rio
                if (month === 11 || month === 12) {
                    isThirteenthSalaryMonth = true;
                    thirteenthSalaryMessage.classList.remove('hidden');
                    initialScreen.classList.add('hidden');
                    dayStatusEl.textContent = "‚ùå Per√≠odo de 13¬∫ sal√°rio - Solicita√ß√µes de vale suspensas.";
                    daysLeftEl.textContent = "As solicita√ß√µes retornar√£o em janeiro.";
                    return;
                } else {
                    isThirteenthSalaryMonth = false;
                    thirteenthSalaryMessage.classList.add('hidden');
                    initialScreen.classList.remove('hidden');
                }
                
                // Verificar se est√° no per√≠odo de solicita√ß√£o (dias 10 a 20)
                if (day >= 10 && day <= 20) {
                    isRequestPeriod = true;
                    daysRemaining = 20 - day;
                    
                    if (day === 20) {
                        dayStatusEl.textContent = "‚úÖ Hoje √© o √∫ltimo dia para solicitar o vale!";
                    } else {
                        dayStatusEl.textContent = "‚úÖ Estamos no per√≠odo de solicita√ß√£o de vale.";
                    }
                    
                    daysLeftEl.innerHTML = `<span class="days-left">${daysRemaining} dia(s) restante(s)</span> para solicitar seu vale.`;
                    requestBtn.disabled = false;
                    
                    // Verificar se deve mostrar modal de lembrete (apenas se n√£o solicitou este m√™s)
                    const lastRequestMonth = localStorage.getItem('lastValeRequestMonth');
                    const currentMonth = today.getMonth() + '_' + today.getFullYear();
                    
                    if (!lastRequestMonth || lastRequestMonth !== currentMonth) {
                        setTimeout(showReminderModal, 1000);
                    }
                } else {
                    isRequestPeriod = false;
                    
                    if (day < 10) {
                        const daysUntilStart = 10 - day;
                        dayStatusEl.textContent = "‚ùå O per√≠odo de solicita√ß√£o ainda n√£o come√ßou.";
                        daysLeftEl.textContent = `Faltam ${daysUntilStart} dia(s) para o in√≠cio do per√≠odo.`;
                    } else {
                        dayStatusEl.textContent = "‚ùå O per√≠odo de solicita√ß√£o j√° encerrou.";
                        daysLeftEl.textContent = "Aguarde o pr√≥ximo m√™s para solicitar seu vale.";
                    }
                    
                    requestBtn.disabled = true;
                }
            }
            
            // Mostrar modal de lembrete
            function showReminderModal() {
                modalDaysLeft.textContent = `Voc√™ tem ${daysRemaining} dia(s) para solicitar.`;
                reminderModal.classList.remove('hidden');
            }
            
            // Fechar modal de lembrete
            function closeReminderModal() {
                reminderModal.classList.add('hidden');
            }
            
            // Marcar que o vale foi solicitado este m√™s
            function markValeRequested() {
                const today = new Date();
                const currentMonth = today.getMonth() + '_' + today.getFullYear();
                localStorage.setItem('lastValeRequestMonth', currentMonth);
            }
            
            // Voltar para a aba frigobar
            function goBackToFrigobar() {
                // Ativar a aba frigobar
                document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                
                document.querySelector('[onclick="openTab(\'frigobar\')"]').classList.add('active');
                document.getElementById('frigobar').classList.add('active');
                
                // Resetar formul√°rio do vale
                resetForm();
            }
            
            // Navega√ß√£o entre telas
            requestBtn.addEventListener('click', function() {
                if (!isRequestPeriod || isThirteenthSalaryMonth) return;
                
                initialScreen.classList.add('hidden');
                confirmationScreen.classList.remove('hidden');
                closeReminderModal();
            });
            
            modalRequestBtn.addEventListener('click', function() {
                closeReminderModal();
                initialScreen.classList.add('hidden');
                confirmationScreen.classList.remove('hidden');
            });
            
            modalCloseBtn.addEventListener('click', function() {
                closeReminderModal();
            });
            
            yesBtn.addEventListener('click', function() {
                confirmationScreen.classList.add('hidden');
                nameScreen.classList.remove('hidden');
                nameInput.focus();
            });
            
            noBtn.addEventListener('click', function() {
                confirmationScreen.classList.add('hidden');
                refusalScreen.classList.remove('hidden');
                
                // Configurar mensagem de recusa
                const now = new Date();
                const deadline = new Date();
                deadline.setHours(15, 30, 0, 0);
                
                if (now < deadline) {
                    refusalInfo.textContent = `Voc√™ pode mudar de ideia at√© √†s 15:30 de hoje.`;
                } else {
                    refusalInfo.textContent = `O prazo para mudar de ideia era at√© √†s 15:30 de hoje.`;
                }
            });
            
            confirmNameBtn.addEventListener('click', function() {
                const name = nameInput.value.trim();
                
                if (name === "") {
                    alert('Por favor, insira seu nome completo.');
                    nameInput.focus();
                    return;
                }
                
                employeeName = name;
                nameScreen.classList.add('hidden');
                valueScreen.classList.remove('hidden');
                valueInput.focus();
            });
            
            confirmValueBtn.addEventListener('click', function() {
                const value = parseFloat(valueInput.value);
                
                if (isNaN(value) || value <= 0) {
                    alert('Por favor, insira um valor v√°lido.');
                    valueInput.focus();
                    return;
                }
                
                selectedValue = value;
                valueScreen.classList.add('hidden');
                finalScreen.classList.remove('hidden');
                
                // Marcar que o vale foi solicitado este m√™s
                markValeRequested();
                
                // Configurar mensagens
                successMessage.innerHTML = `
                    <strong>Funcion√°rio:</strong> ${employeeName}<br>
                    <strong>Valor solicitado:</strong> R$ ${value.toFixed(2).replace('.', ',')}
                `;
                
                const now = new Date();
                const deadline = new Date();
                deadline.setHours(15, 30, 0, 0);
                
                if (now < deadline) {
                    infoMessage.textContent = `Voc√™ pode mudar de ideia at√© √†s 15:30 de hoje.`;
                } else {
                    infoMessage.textContent = `O prazo para mudar de ideia era at√© √†s 15:30 de hoje.`;
                }
            });
            
            // Configurar bot√µes do WhatsApp
            whatsappBtn.addEventListener('click', function() {
                const message = `Solicita√ß√£o de Vale\nFuncion√°rio: ${employeeName}\nValor: R$ ${selectedValue.toFixed(2).replace('.', ',')}`;
                const encodedMessage = encodeURIComponent(message);
                const whatsappURL = `https://wa.me/?text=${encodedMessage}`;
                window.open(whatsappURL, '_blank');
            });
            
            refusalWhatsappBtn.addEventListener('click', function() {
                const message = "Obrigado, n√£o desejo pedir vale";
                const encodedMessage = encodeURIComponent(message);
                const whatsappURL = `https://wa.me/?text=${encodedMessage}`;
                window.open(whatsappURL, '_blank');
            });
            
            // Bot√µes de voltar ao frigobar
            backBtn.addEventListener('click', function() {
                goBackToFrigobar();
            });
            
            refusalBackBtn.addEventListener('click', function() {
                goBackToFrigobar();
            });
            
            // Resetar formul√°rio
            function resetForm() {
                nameInput.value = '';
                valueInput.value = '';
                selectedValue = 0;
                employeeName = "";
                
                // Voltar para tela inicial do vale
                initialScreen.classList.remove('hidden');
                confirmationScreen.classList.add('hidden');
                nameScreen.classList.add('hidden');
                valueScreen.classList.add('hidden');
                finalScreen.classList.add('hidden');
                refusalScreen.classList.add('hidden');
            }
            
            // Permitir Enter nos campos
            nameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    confirmNameBtn.click();
                }
            });
            
            valueInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    confirmValueBtn.click();
                }
            });
            
            // Fechar modal ao clicar fora dele
            reminderModal.addEventListener('click', function(e) {
                if (e.target === reminderModal) {
                    closeReminderModal();
                }
            });
            
            // Inicializar verifica√ß√£o de data
            checkDate();
        }

        // ========== SISTEMA DE COTA√á√ÉO DE RESERVAS ==========
        let quotationInitialized = false;
        let currentLang = 'pt';

        // Language data
        const translations = {
            pt: {
                calculatorTitle: "Informa√ß√µes da Reserva",
                guestNameLabel: "Nome do H√≥spede Principal",
                roomConfigLabel: "Configura√ß√£o de Quartos",
                addRoomBtn: "+ Adicionar Quarto",
                datePeriodsLabel: "Per√≠odos de Estadia",
                checkInLabel: "Check-in",
                checkOutLabel: "Check-out",
                mealTypeLabel: "Tipo de Refei√ß√£o",
                breakfastLabel: "Com Caf√© da Manh√£",
                noBreakfastLabel: "Sem Caf√© da Manh√£",
                halfBoardLabel: "Meia Pens√£o (MAP)",
                fullBoardLabel: "Pens√£o Completa (FAP)",
                mealPriceLabel: "Valor por Refei√ß√£o (por pessoa)",
                showMealDetailsLabel: "Mostrar detalhes das refei√ß√µes no voucher",
                parkingLabel: "Estacionamento",
                copyButtonText: "Copiar Cota√ß√£o",
                whatsappButtonText: "Enviar por WhatsApp"
            },
            en: {
                calculatorTitle: "Reservation Information",
                guestNameLabel: "Main Guest Name",
                roomConfigLabel: "Room Configuration",
                addRoomBtn: "+ Add Room",
                datePeriodsLabel: "Stay Periods",
                checkInLabel: "Check-in",
                checkOutLabel: "Check-out",
                mealTypeLabel: "Meal Type",
                breakfastLabel: "With Breakfast",
                noBreakfastLabel: "Without Breakfast",
                halfBoardLabel: "Half Board (MAP)",
                fullBoardLabel: "Full Board (FAP)",
                mealPriceLabel: "Price per Meal (per person)",
                showMealDetailsLabel: "Show meal details in voucher",
                parkingLabel: "Parking",
                copyButtonText: "Copy Quotation",
                whatsappButtonText: "Send via WhatsApp"
            },
            fr: {
                calculatorTitle: "Informations de R√©servation",
                guestNameLabel: "Nom du Client Principal",
                roomConfigLabel: "Configuration des Chambres",
                addRoomBtn: "+ Ajouter Chambre",
                datePeriodsLabel: "P√©riodes de S√©jour",
                checkInLabel: "Arriv√©e",
                checkOutLabel: "D√©part",
                mealTypeLabel: "Type de Repas",
                breakfastLabel: "Avec Petit D√©jeuner",
                noBreakfastLabel: "Sans Petit D√©jeuner",
                halfBoardLabel: "Demi-Pension (MAP)",
                fullBoardLabel: "Pension Compl√®te (FAP)",
                mealPriceLabel: "Prix par Repas (par personne)",
                showMealDetailsLabel: "Afficher les d√©tails des repas dans le bon",
                parkingLabel: "Parking",
                copyButtonText: "Copier le Devis",
                whatsappButtonText: "Envoyer par WhatsApp"
            },
            es: {
                calculatorTitle: "Informaci√≥n de la Reserva",
                guestNameLabel: "Nombre del Hu√©sped Principal",
                roomConfigLabel: "Configuraci√≥n de Habitaciones",
                addRoomBtn: "+ A√±adir Habitaci√≥n",
                datePeriodsLabel: "Per√≠odos de Estancia",
                checkInLabel: "Check-in",
                checkOutLabel: "Check-out",
                mealTypeLabel: "Tipo de Comida",
                breakfastLabel: "Con Desayuno",
                noBreakfastLabel: "Sin Desayuno",
                halfBoardLabel: "Media Pensi√≥n (MAP)",
                fullBoardLabel: "Pensi√≥n Completa (FAP)",
                mealPriceLabel: "Precio por Comida (por persona)",
                showMealDetailsLabel: "Mostrar detalles de las comidas en el voucher",
                parkingLabel: "Estacionamiento",
                copyButtonText: "Copiar Cotizaci√≥n",
                whatsappButtonText: "Enviar por WhatsApp"
            }
        };

        function initializeQuotationSystem() {
            // Language selector functionality
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // Update active button
                    document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Update language
                    currentLang = this.getAttribute('data-lang');
                    updateLanguage();
                    calculateQuotation();
                });
            });

            // Update interface language
            function updateLanguage() {
                const langData = translations[currentLang];
                
                // Update form labels
                document.getElementById('calculatorTitle').textContent = langData.calculatorTitle;
                document.getElementById('guestNameLabel').textContent = langData.guestNameLabel;
                document.getElementById('roomConfigLabel').textContent = langData.roomConfigLabel;
                document.getElementById('addRoomBtn').textContent = langData.addRoomBtn;
                document.getElementById('datePeriodsLabel').textContent = langData.datePeriodsLabel;
                document.getElementById('mealTypeLabel').textContent = langData.mealTypeLabel;
                document.getElementById('breakfastLabel').textContent = langData.breakfastLabel;
                document.getElementById('noBreakfastLabel').textContent = langData.noBreakfastLabel;
                document.getElementById('halfBoardLabel').textContent = langData.halfBoardLabel;
                document.getElementById('fullBoardLabel').textContent = langData.fullBoardLabel;
                document.getElementById('mealPriceLabel').textContent = langData.mealPriceLabel;
                document.getElementById('showMealDetailsLabel').textContent = langData.showMealDetailsLabel;
                document.getElementById('parkingLabel').textContent = langData.parkingLabel;
                document.getElementById('copyButtonText').textContent = langData.copyButtonText;
                document.getElementById('whatsappButtonText').textContent = langData.whatsappButtonText;
                
                // Update placeholders
                document.getElementById('guestName').placeholder = currentLang === 'pt' ? 'Digite o nome completo' : 
                                                                  currentLang === 'en' ? 'Enter full name' :
                                                                  currentLang === 'fr' ? 'Entrez le nom complet' : 
                                                                  'Ingrese el nombre completo';
                
                // Update room configuration options
                updateRoomConfigurationLanguage();
                updateRoomsSummary();
            }

            // Update room configuration language
            function updateRoomConfigurationLanguage() {
                const roomItems = document.querySelectorAll('.room-item');
                roomItems.forEach(room => {
                    const quantityInput = room.querySelector('input[type="number"]:first-of-type');
                    const guestsSelect = room.querySelector('select');
                    const rateInput = room.querySelector('input[type="number"]:last-of-type');
                    
                    // Update select options
                    guestsSelect.innerHTML = '';
                    for (let i = 1; i <= 4; i++) {
                        const option = document.createElement('option');
                        option.value = i;
                        option.textContent = currentLang === 'pt' ? `${i} H√≥spede${i > 1 ? 's' : ''}` :
                                            currentLang === 'en' ? `${i} Guest${i > 1 ? 's' : ''}` :
                                            currentLang === 'fr' ? `${i} Client${i > 1 ? 's' : ''}` :
                                            `${i} Hu√©sped${i > 1 ? 'es' : ''}`;
                        guestsSelect.appendChild(option);
                    }
                    
                    // Update placeholders
                    quantityInput.placeholder = currentLang === 'pt' ? 'Quantidade' :
                                              currentLang === 'en' ? 'Quantity' :
                                              currentLang === 'fr' ? 'Quantit√©' :
                                              'Cantidad';
                    
                    rateInput.placeholder = currentLang === 'pt' ? 'Di√°ria (R$)' :
                                         currentLang === 'en' ? 'Daily Rate (R$)' :
                                         currentLang === 'fr' ? 'Tarif (R$)' :
                                         'Tarifa (R$)';
                });
            }

            // Meal type selection
            document.querySelectorAll('input[name="mealType"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    // Update radio label styles
                    document.querySelectorAll('.radio-label').forEach(label => {
                        label.classList.remove('selected');
                    });
                    document.getElementById('label' + this.value.charAt(0).toUpperCase() + this.value.slice(1)).classList.add('selected');
                    
                    // Show/hide meal price input
                    const mealPriceSection = document.getElementById('mealPriceSection');
                    if (this.value === 'halfBoard' || this.value === 'fullBoard') {
                        mealPriceSection.style.display = 'block';
                    } else {
                        mealPriceSection.style.display = 'none';
                    }
                    
                    calculateQuotation();
                });
            });
            
            // Add event listeners for real-time updates
            document.querySelectorAll('#guestName, #mealPrice, #parking').forEach(input => {
                input.addEventListener('input', calculateQuotation);
                input.addEventListener('change', calculateQuotation);
            });
            
            // Initialize first radio as selected
            document.getElementById('labelBreakfast').classList.add('selected');
            
            // Initial calculation
            updateRoomsSummary();
            updateDatePeriodsSummary();
            updateLanguage();
            calculateQuotation();
        }

        // Add new room configuration
        function addRoom() {
            const roomsContainer = document.getElementById('roomsContainer');
            const roomItem = document.createElement('div');
            roomItem.className = 'room-item';
            
            roomItem.innerHTML = `
                <input type="number" class="room-input" min="1" value="1" placeholder="${currentLang === 'pt' ? 'Quantidade' : 
                                                                                      currentLang === 'en' ? 'Quantity' :
                                                                                      currentLang === 'fr' ? 'Quantit√©' :
                                                                                      'Cantidad'}" onchange="updateRoomsSummary()">
                <select class="room-input" onchange="updateRoomsSummary()">
                    ${Array.from({length: 4}, (_, i) => 
                        `<option value="${i+1}">${currentLang === 'pt' ? `${i+1} H√≥spede${i > 0 ? 's' : ''}` :
                                              currentLang === 'en' ? `${i+1} Guest${i > 0 ? 's' : ''}` :
                                              currentLang === 'fr' ? `${i+1} Client${i > 0 ? 's' : ''}` :
                                              `${i+1} Hu√©sped${i > 0 ? 'es' : ''}`}</option>`
                    ).join('')}
                </select>
                <input type="number" class="room-input" min="0" step="0.01" placeholder="${currentLang === 'pt' ? 'Di√°ria (R$)' :
                                                                                        currentLang === 'en' ? 'Daily Rate (R$)' :
                                                                                        currentLang === 'fr' ? 'Tarif (R$)' :
                                                                                        'Tarifa (R$)'}" onchange="updateRoomsSummary()">
                <button class="remove-room-btn" onclick="removeRoom(this)">√ó</button>
            `;
            
            roomsContainer.appendChild(roomItem);
            updateRoomsSummary();
            
            // Show remove buttons for all rooms if there's more than one
            const removeButtons = document.querySelectorAll('.remove-room-btn');
            if (removeButtons.length > 1) {
                removeButtons.forEach(btn => btn.style.display = 'block');
            }
        }

        // Remove room configuration
        function removeRoom(button) {
            const roomItem = button.closest('.room-item');
            roomItem.remove();
            updateRoomsSummary();
            
            // Hide remove buttons if there's only one room left
            const removeButtons = document.querySelectorAll('.remove-room-btn');
            if (removeButtons.length === 1) {
                removeButtons[0].style.display = 'none';
            }
        }

        // Update rooms summary
        function updateRoomsSummary() {
            const roomItems = document.querySelectorAll('.room-item');
            let totalRooms = 0;
            let totalGuests = 0;
            let totalDailyRate = 0;
            
            roomItems.forEach(room => {
                const quantity = parseInt(room.querySelector('input[type="number"]:first-of-type').value) || 0;
                const guests = parseInt(room.querySelector('select').value) || 0;
                const rate = parseFloat(room.querySelector('input[type="number"]:last-of-type').value) || 0;
                
                totalRooms += quantity;
                totalGuests += quantity * guests;
                totalDailyRate += quantity * rate;
            });
            
            const formatCurrency = (value) => {
                return 'R$ ' + value.toFixed(2).replace('.', ',').replace(/\d(?=(\d{3})+,)/g, '$&.');
            };
            
            const summaryText = currentLang === 'pt' ? `Total: ${totalRooms} quarto(s) ‚Ä¢ ${totalGuests} h√≥spede(s) ‚Ä¢ ${formatCurrency(totalDailyRate)}/dia` :
                              currentLang === 'en' ? `Total: ${totalRooms} room(s) ‚Ä¢ ${totalGuests} guest(s) ‚Ä¢ ${formatCurrency(totalDailyRate)}/day` :
                              currentLang === 'fr' ? `Total: ${totalRooms} chambre(s) ‚Ä¢ ${totalGuests} client(s) ‚Ä¢ ${formatCurrency(totalDailyRate)}/jour` :
                              `Total: ${totalRooms} habitaci√≥n(es) ‚Ä¢ ${totalGuests} hu√©sped(es) ‚Ä¢ ${formatCurrency(totalDailyRate)}/d√≠a`;
            
            document.getElementById('roomsSummary').textContent = summaryText;
            calculateQuotation();
        }

        // Add new date period
        function addDatePeriod() {
            const datePeriodsContainer = document.getElementById('datePeriodsContainer');
            const datePeriodIndex = datePeriodsContainer.children.length;
            const datePeriod = document.createElement('div');
            datePeriod.className = 'date-period';
            
            datePeriod.innerHTML = `
                <input type="date" class="date-period-input" id="checkIn${datePeriodIndex}" onchange="calculateQuotation()">
                <span>${currentLang === 'pt' ? 'at√©' : 
                       currentLang === 'en' ? 'to' :
                       currentLang === 'fr' ? '√†' : 
                       'hasta'}</span>
                <input type="date" class="date-period-input" id="checkOut${datePeriodIndex}" onchange="calculateQuotation()">
                <button class="remove-room-btn" onclick="removeDatePeriod(this)">√ó</button>
            `;
            
            datePeriodsContainer.appendChild(datePeriod);
            updateDatePeriodsSummary();
            
            // Show remove buttons for all date periods if there's more than one
            const removeButtons = document.querySelectorAll('.date-period .remove-room-btn');
            if (removeButtons.length > 1) {
                removeButtons.forEach(btn => btn.style.display = 'block');
            }
        }

        // Remove date period
        function removeDatePeriod(button) {
            const datePeriod = button.closest('.date-period');
            datePeriod.remove();
            updateDatePeriodsSummary();
            
            // Hide remove buttons if there's only one date period left
            const removeButtons = document.querySelectorAll('.date-period .remove-room-btn');
            if (removeButtons.length === 1) {
                removeButtons[0].style.display = 'none';
            }
        }

        // Update date periods summary
        function updateDatePeriodsSummary() {
            const datePeriods = document.querySelectorAll('.date-period');
            let totalNights = 0;
            
            datePeriods.forEach((period, index) => {
                const checkIn = document.getElementById(`checkIn${index}`).value;
                const checkOut = document.getElementById(`checkOut${index}`).value;
                
                if (checkIn && checkOut) {
                    const checkInDate = new Date(checkIn);
                    const checkOutDate = new Date(checkOut);
                    const timeDiff = checkOutDate.getTime() - checkInDate.getTime();
                    const nights = Math.ceil(timeDiff / (1000 * 3600 * 24));
                    totalNights += nights;
                }
            });
            
            const summaryText = currentLang === 'pt' ? `Total: ${totalNights} noite(s)` :
                              currentLang === 'en' ? `Total: ${totalNights} night(s)` :
                              currentLang === 'fr' ? `Total: ${totalNights} nuit(s)` :
                              `Total: ${totalNights} noche(s)`;
            
            document.getElementById('datePeriodsSummary').textContent = summaryText;
            calculateQuotation();
        }

        function calculateQuotation() {
            // Get input values
            const guestName = document.getElementById('guestName').value || '';
            const mealType = document.querySelector('input[name="mealType"]:checked').value;
            const mealPrice = parseFloat(document.getElementById('mealPrice').value) || 0;
            const parking = document.getElementById('parking').value;
            const showMealDetails = document.getElementById('showMealDetails').checked;
            
            // Calculate room configurations
            const roomItems = document.querySelectorAll('.room-item');
            let totalRooms = 0;
            let totalGuests = 0;
            let totalDailyRate = 0;
            const roomDetails = [];
            
            roomItems.forEach((room, index) => {
                const quantity = parseInt(room.querySelector('input[type="number"]:first-of-type').value) || 0;
                const guests = parseInt(room.querySelector('select').value) || 0;
                const rate = parseFloat(room.querySelector('input[type="number"]:last-of-type').value) || 0;
                
                totalRooms += quantity;
                totalGuests += quantity * guests;
                totalDailyRate += quantity * rate;
                
                if (quantity > 0) {
                    roomDetails.push({
                        quantity: quantity,
                        guests: guests,
                        rate: rate
                    });
                }
            });
            
            // Calculate date periods
            const datePeriods = document.querySelectorAll('.date-period');
            let totalNights = 0;
            const datePeriodDetails = [];
            
            datePeriods.forEach((period, index) => {
                const checkIn = document.getElementById(`checkIn${index}`).value;
                const checkOut = document.getElementById(`checkOut${index}`).value;
                
                if (checkIn && checkOut) {
                    const checkInDate = new Date(checkIn);
                    const checkOutDate = new Date(checkOut);
                    const timeDiff = checkOutDate.getTime() - checkInDate.getTime();
                    const nights = Math.ceil(timeDiff / (1000 * 3600 * 24));
                    totalNights += nights;
                    
                    datePeriodDetails.push({
                        checkIn: checkIn,
                        checkOut: checkOut,
                        nights: nights
                    });
                }
            });
            
            if (totalNights <= 0 || totalRooms === 0) {
                // Show empty preview if dates are invalid or no rooms
                document.getElementById('quotationPreview').innerHTML = `
                    <div class="quotation-header">
                        <div class="hotel-name">ICARA√ç PRAIA HOTEL</div>
                        <div class="quotation-title">COTA√á√ÉO DE RESERVA</div>
                    </div>
                    <div class="quotation-body" style="text-align: center; padding: 40px;">
                        <p style="color: #666; font-size: 16px;">
                            ${currentLang === 'pt' ? 'Preencha as datas de check-in e check-out e configure os quartos para gerar a cota√ß√£o' : 
                              currentLang === 'en' ? 'Fill in the check-in and check-out dates and configure rooms to generate the quotation' :
                              currentLang === 'fr' ? 'Remplissez les dates d\'arriv√©e et de d√©part et configurez les chambres pour g√©n√©rer le devis' : 
                              'Complete las fechas de check-in y check-out y configure las habitaciones para generar la cotizaci√≥n'}
                        </p>
                    </div>
                `;
                return;
            }
            
            // Calculate base amount
            let baseAmount = totalDailyRate * totalNights;
            
            // Calculate meal costs
            let mealDescription = '';
            let mealCost = 0;
            let mealsPerDay = 0;
            
            const mealTypes = {
                'breakfast': translations[currentLang].breakfastLabel,
                'noBreakfast': translations[currentLang].noBreakfastLabel,
                'halfBoard': translations[currentLang].halfBoardLabel,
                'fullBoard': translations[currentLang].fullBoardLabel
            };
            
            switch(mealType) {
                case 'breakfast':
                    mealDescription = mealTypes.breakfast;
                    break;
                case 'noBreakfast':
                    mealDescription = mealTypes.noBreakfast;
                    break;
                case 'halfBoard':
                    mealDescription = mealTypes.halfBoard;
                    mealsPerDay = 1;
                    mealCost = mealPrice * totalGuests * mealsPerDay * totalNights;
                    break;
                case 'fullBoard':
                    mealDescription = mealTypes.fullBoard;
                    mealsPerDay = 2;
                    mealCost = mealPrice * totalGuests * mealsPerDay * totalNights;
                    break;
            }
            
            // Calculate parking cost
            let parkingCost = 0;
            if (parking === 'yes') {
                parkingCost = 45 * totalRooms * totalNights;
            }
            
            // Calculate total before tax
            const subtotal = baseAmount + mealCost + parkingCost;
            
            // Calculate ISS tax (2%)
            const issTax = subtotal * 0.02;
            
            // Calculate final total
            const total = subtotal + issTax;
            
            // Calculate average rate per night
            const avgRatePerNight = total / totalNights;
            
            // Format currency
            const formatCurrency = (value) => {
                return 'R$ ' + value.toFixed(2).replace('.', ',').replace(/\d(?=(\d{3})+,)/g, '$&.');
            };
            
            // Format dates for display
            const formatDateForDisplay = (dateString) => {
                if (!dateString) return '-';
                const date = new Date(dateString);
                return date.toLocaleDateString('pt-BR');
            };
            
            // Generate room details HTML
            let roomDetailsHTML = '';
            roomDetails.forEach((room, index) => {
                roomDetailsHTML += `
                    <div class="detail-row">
                        <span class="detail-label">${currentLang === 'pt' ? 'Grupo' : 
                                                   currentLang === 'en' ? 'Group' :
                                                   currentLang === 'fr' ? 'Groupe' : 
                                                   'Grupo'} ${index + 1}:</span>
                        <span class="detail-value">${room.quantity} ${currentLang === 'pt' ? 'apartamento(s)' : 
                                                                     currentLang === 'en' ? 'apartment(s)' :
                                                                     currentLang === 'fr' ? 'appartement(s)' : 
                                                                     'apartamento(s)'} ‚Ä¢ ${room.guests} ${currentLang === 'pt' ? 'h√≥spede(s)' : 
                                                                                                        currentLang === 'en' ? 'guest(s)' :
                                                                                                        currentLang === 'fr' ? 'client(s)' : 
                                                                                                        'hu√©sped(es)'} ‚Ä¢ ${formatCurrency(room.rate)}/${currentLang === 'pt' ? 'dia' : 
                                                                                                                                                     currentLang === 'en' ? 'day' :
                                                                                                                                                     currentLang === 'fr' ? 'jour' : 
                                                                                                                                                     'd√≠a'}</span>
                    </div>
                `;
            });
            
            // Generate date periods HTML
            let datePeriodsHTML = '';
            datePeriodDetails.forEach((period, index) => {
                datePeriodsHTML += `
                    <div class="detail-row">
                        <span class="detail-label">${currentLang === 'pt' ? 'Per√≠odo' : 
                                                   currentLang === 'en' ? 'Period' :
                                                   currentLang === 'fr' ? 'P√©riode' : 
                                                   'Per√≠odo'} ${index + 1}:</span>
                        <span class="detail-value">${formatDateForDisplay(period.checkIn)} ${currentLang === 'pt' ? 'at√©' : 
                                                                                           currentLang === 'en' ? 'to' :
                                                                                           currentLang === 'fr' ? '√†' : 
                                                                                           'hasta'} ${formatDateForDisplay(period.checkOut)} (${period.nights} ${currentLang === 'pt' ? 'noite(s)' : 
                                                                                                                                                                currentLang === 'en' ? 'night(s)' :
                                                                                                                                                                currentLang === 'fr' ? 'nuit(s)' : 
                                                                                                                                                                'noche(s)'})</span>
                    </div>
                `;
            });
            
            // Generate quotation HTML
            const quotationHTML = `
                <div class="quotation-header">
                    <div class="hotel-name">ICARA√ç PRAIA HOTEL</div>
                    <div class="quotation-title">COTA√á√ÉO DE RESERVA</div>
                    <div class="quotation-badge">COTA√á√ÉO ‚Ä¢ V√ÅLIDA 24 HORAS</div>
                </div>
                
                <div class="validity-notice">
                    <span>‚ö†Ô∏è</span>
                    ${currentLang === 'pt' ? 'Esta cota√ß√£o √© v√°lida por 24 horas. Tarifas e disponibilidade podem mudar ap√≥s a expira√ß√£o.' :
                     currentLang === 'en' ? 'This quotation is valid for 24 hours. Rates and availability may change after expiration.' :
                     currentLang === 'fr' ? 'Ce devis est valable 24 heures. Les tarifs et la disponibilit√© peuvent changer apr√®s expiration.' :
                     'Esta cotizaci√≥n es v√°lida por 24 horas. Las tarifas y disponibilidad pueden cambiar despu√©s de la expiraci√≥n.'}
                </div>
                
                <div class="quotation-body">
                    <div class="section-title">${currentLang === 'pt' ? 'INFORMA√á√ïES DA RESERVA' :
                                                currentLang === 'en' ? 'RESERVATION INFORMATION' :
                                                currentLang === 'fr' ? 'INFORMATIONS DE R√âSERVATION' :
                                                'INFORMACI√ìN DE LA RESERVA'}</div>
                    <div class="details-grid">
                        <div class="detail-row">
                            <span class="detail-label">${currentLang === 'pt' ? 'H√≥spede Principal:' :
                                                       currentLang === 'en' ? 'Main Guest:' :
                                                       currentLang === 'fr' ? 'Client Principal:' :
                                                       'Hu√©sped Principal:'}</span>
                            <span class="detail-value">${guestName || (currentLang === 'pt' ? 'N√£o informado' : 
                                                                      currentLang === 'en' ? 'Not informed' :
                                                                      currentLang === 'fr' ? 'Non inform√©' : 
                                                                      'No informado')}</span>
                        </div>
                        ${roomDetailsHTML}
                        ${datePeriodsHTML}
                        <div class="detail-row">
                            <span class="detail-label">${currentLang === 'pt' ? 'Tipo de Refei√ß√£o:' :
                                                       currentLang === 'en' ? 'Meal Type:' :
                                                       currentLang === 'fr' ? 'Type de Repas:' :
                                                       'Tipo de Comida:'}</span>
                            <span class="detail-value">${mealDescription}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">${currentLang === 'pt' ? 'Estacionamento:' :
                                                       currentLang === 'en' ? 'Parking:' :
                                                       currentLang === 'fr' ? 'Stationnement:' :
                                                       'Estacionamiento:'}</span>
                            <span class="detail-value">${parking === 'yes' ? 
                                (currentLang === 'pt' ? 'Sim' : 
                                 currentLang === 'en' ? 'Yes' :
                                 currentLang === 'fr' ? 'Oui' : 
                                 'S√≠') : 
                                (currentLang === 'pt' ? 'N√£o' : 
                                 currentLang === 'en' ? 'No' :
                                 currentLang === 'fr' ? 'Non' : 
                                 'No')}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">${currentLang === 'pt' ? 'Per√≠odo:' :
                                                       currentLang === 'en' ? 'Period:' :
                                                       currentLang === 'fr' ? 'P√©riode:' :
                                                       'Per√≠odo:'}</span>
                            <span class="detail-value">${totalNights} ${currentLang === 'pt' ? 'Noite(s)' : 
                                                                       currentLang === 'en' ? 'Night(s)' :
                                                                       currentLang === 'fr' ? 'Nuit(s)' : 
                                                                       'Noche(s)'}</span>
                        </div>
                    </div>
                    
                    <div class="section-title">${currentLang === 'pt' ? 'DETALHES FINANCEIROS' :
                                                currentLang === 'en' ? 'FINANCIAL DETAILS' :
                                                currentLang === 'fr' ? 'D√âTAILS FINANCIERS' :
                                                'DETALLES FINANCIEROS'}</div>
                    <div class="pricing-breakdown">
                        ${roomDetails.map((room, index) => `
                            <div class="price-row">
                                <span>${currentLang === 'pt' ? 'Grupo' : 
                                       currentLang === 'en' ? 'Group' :
                                       currentLang === 'fr' ? 'Groupe' : 
                                       'Grupo'} ${index + 1} (${room.quantity} ${currentLang === 'pt' ? 'apto(s)' : 
                                                                               currentLang === 'en' ? 'room(s)' :
                                                                               currentLang === 'fr' ? 'chambre(s)' : 
                                                                               'habitaci√≥n(es)'} √ó ${totalNights} ${currentLang === 'pt' ? 'noite(s)' : 
                                                                                                                    currentLang === 'en' ? 'night(s)' :
                                                                                                                    currentLang === 'fr' ? 'nuit(s)' : 
                                                                                                                    'noche(s)'}):</span>
                                <span>${formatCurrency(room.quantity * room.rate * totalNights)}</span>
                            </div>
                        `).join('')}
                        ${mealCost > 0 && showMealDetails ? `
                        <div class="price-row">
                            <span>${currentLang === 'pt' ? 'Refei√ß√µes inclu√≠das:' :
                                   currentLang === 'en' ? 'Meals included:' :
                                   currentLang === 'fr' ? 'Repas inclus :' :
                                   'Comidas incluidas:'}</span>
                            <span>${formatCurrency(mealCost)}</span>
                        </div>
                        ` : ''}
                        ${parkingCost > 0 ? `
                        <div class="price-row">
                            <span>${currentLang === 'pt' ? 'Estacionamento:' :
                                   currentLang === 'en' ? 'Parking:' :
                                   currentLang === 'fr' ? 'Stationnement :' :
                                   'Estacionamiento:'}</span>
                            <span>${formatCurrency(parkingCost)}</span>
                        </div>
                        ` : ''}
                        <div class="price-row">
                            <span>${currentLang === 'pt' ? 'Subtotal:' :
                                   currentLang === 'en' ? 'Subtotal:' :
                                   currentLang === 'fr' ? 'Sous-total :' :
                                   'Subtotal:'}</span>
                            <span>${formatCurrency(subtotal)}</span>
                        </div>
                        <div class="price-row">
                            <span>${currentLang === 'pt' ? 'ISS (2%):' :
                                   currentLang === 'en' ? 'ISS (2%):' :
                                   currentLang === 'fr' ? 'ISS (2%) :' :
                                   'ISS (2%):'}</span>
                            <span>${formatCurrency(issTax)}</span>
                        </div>
                        <div class="price-row">
                            <span>${currentLang === 'pt' ? 'Di√°ria M√©dia:' :
                                   currentLang === 'en' ? 'Average Daily Rate:' :
                                   currentLang === 'fr' ? 'Tarif Journalier Moyen :' :
                                   'Tarifa Diaria Promedio:'}</span>
                            <span>${formatCurrency(avgRatePerNight)}</span>
                        </div>
                        <div class="price-row total-row">
                            <span>${currentLang === 'pt' ? 'TOTAL:' :
                                   currentLang === 'en' ? 'TOTAL:' :
                                   currentLang === 'fr' ? 'TOTAL :' :
                                   'TOTAL:'}</span>
                            <span>${formatCurrency(total)}</span>
                        </div>
                    </div>
                </div>
            `;
            
            // Update preview
            document.getElementById('quotationPreview').innerHTML = quotationHTML;
        }
        
        function copyQuotation() {
            const previewContent = document.getElementById('quotationPreview');
            const range = document.createRange();
            range.selectNode(previewContent);
            window.getSelection().removeAllRanges();
            window.getSelection().addRange(range);
            
            try {
                const successful = document.execCommand('copy');
                window.getSelection().removeAllRanges();
                
                if (successful) {
                    alert(currentLang === 'pt' ? 'Cota√ß√£o copiada para a √°rea de transfer√™ncia!' :
                          currentLang === 'en' ? 'Quotation copied to clipboard!' :
                          currentLang === 'fr' ? 'Devis copi√© dans le presse-papiers !' :
                          '¬°Cotizaci√≥n copiada al portapapeles!');
                } else {
                    alert(currentLang === 'pt' ? 'Erro ao copiar a cota√ß√£o. Tente novamente.' :
                          currentLang === 'en' ? 'Error copying quotation. Please try again.' :
                          currentLang === 'fr' ? 'Erreur lors de la copie du devis. Veuillez r√©essayer.' :
                          'Error al copiar la cotizaci√≥n. Por favor, int√©ntelo de nuevo.');
                }
            } catch (err) {
                alert(currentLang === 'pt' ? 'Erro ao copiar a cota√ß√£o: ' + err :
                      currentLang === 'en' ? 'Error copying quotation: ' + err :
                      currentLang === 'fr' ? 'Erreur lors de la copie du devis : ' + err :
                      'Error al copiar la cotizaci√≥n: ' + err);
            }
        }
        
        function shareWhatsApp() {
            const guestName = document.getElementById('guestName').value || '';
            const mealType = document.querySelector('input[name="mealType"]:checked').value;
            const mealPrice = document.getElementById('mealPrice').value || '0';
            const parking = document.getElementById('parking').value;
            
            // Calculate room configurations
            const roomItems = document.querySelectorAll('.room-item');
            let totalRooms = 0;
            let totalGuests = 0;
            let totalDailyRate = 0;
            const roomDetails = [];
            
            roomItems.forEach(room => {
                const quantity = parseInt(room.querySelector('input[type="number"]:first-of-type').value) || 0;
                const guests = parseInt(room.querySelector('select').value) || 0;
                const rate = parseFloat(room.querySelector('input[type="number"]:last-of-type').value) || 0;
                
                totalRooms += quantity;
                totalGuests += quantity * guests;
                totalDailyRate += quantity * rate;
                
                if (quantity > 0) {
                    roomDetails.push({
                        quantity: quantity,
                        guests: guests,
                        rate: rate
                    });
                }
            });
            
            // Calculate date periods
            const datePeriods = document.querySelectorAll('.date-period');
            let totalNights = 0;
            
            datePeriods.forEach((period, index) => {
                const checkIn = document.getElementById(`checkIn${index}`).value;
                const checkOut = document.getElementById(`checkOut${index}`).value;
                
                if (checkIn && checkOut) {
                    const checkInDate = new Date(checkIn);
                    const checkOutDate = new Date(checkOut);
                    const timeDiff = checkOutDate.getTime() - checkInDate.getTime();
                    const nights = Math.ceil(timeDiff / (1000 * 3600 * 24));
                    totalNights += nights;
                }
            });
            
            // Calculate totals
            const baseAmount = totalDailyRate * totalNights;
            let mealCost = 0;
            if (mealType === 'halfBoard') {
                mealCost = (parseFloat(mealPrice) || 0) * totalGuests * 1 * totalNights;
            } else if (mealType === 'fullBoard') {
                mealCost = (parseFloat(mealPrice) || 0) * totalGuests * 2 * totalNights;
            }
            const parkingCost = (parking === 'yes') ? 45 * totalRooms * totalNights : 0;
            const subtotal = baseAmount + mealCost + parkingCost;
            const issTax = subtotal * 0.02;
            const total = subtotal + issTax;
            const avgRatePerNight = total / totalNights;
            
            // Format currency
            const formatCurrency = (value) => {
                return 'R$ ' + value.toFixed(2).replace('.', ',');
            };
            
            // Create WhatsApp message
            const message = `üè® *ICARA√ç PRAIA HOTEL* - Cota√ß√£o de Reserva\n\n` +
                           `üë§ *H√≥spede:* ${guestName || 'N√£o informado'}\n` +
                           `üè† *Quartos:* ${totalRooms}\n` +
                           `üë• *H√≥spedes:* ${totalGuests}\n` +
                           `üåô *Noites:* ${totalNights}\n` +
                           `üçΩÔ∏è *Refei√ß√£o:* ${translations[currentLang][mealType + 'Label']}\n` +
                           `üöó *Estacionamento:* ${parking === 'yes' ? 'Sim' : 'N√£o'}\n\n` +
                           `üí∞ *Resumo Financeiro:*\n` +
                           `‚Ä¢ Di√°ria m√©dia: ${formatCurrency(avgRatePerNight)}\n` +
                           `‚Ä¢ Subtotal: ${formatCurrency(subtotal)}\n` +
                           `‚Ä¢ ISS (2%): ${formatCurrency(issTax)}\n` +
                           `‚Ä¢ *TOTAL: ${formatCurrency(total)}*\n\n` +
                           `üìã *Esta cota√ß√£o √© v√°lida por 24 horas.*`;
            
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/?text=${encodedMessage}`;
            
            window.open(whatsappUrl, '_blank');
        }

        // ========== PWA INSTALL BUTTON ==========
        let deferredPrompt;
        const installButton = document.getElementById('install-button');

        window.addEventListener('beforeinstallprompt', (event) => {
            event.preventDefault();
            deferredPrompt = event;
            installButton.style.display = 'block';
        });

        installButton.addEventListener('click', () => {
            installButton.style.display = 'none';
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    deferredPrompt = null;
                });
            }
        });

        // Inicializar sistemas que precisam ser inicializados ap√≥s o DOM
        initializeQuotationSystem();
        initializeFrigobar();
        initializeValeSystem();
    </script>
</body>
</html>
